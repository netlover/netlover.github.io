<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/github.css?2018.08.01">

<title>前端预处理技术（Less、Sass、CoffeeScript、TypeScript） | Net Lover</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="CSS不像其它高级语言一样支持算术运算、变量、流程控制与面向对象特性，所以CSS样式较多时会引起一些问题，如修改复杂，冗余，某些别的语言很简单的功能实现不了等。而javascript则是一种半面向对象的动态语言，有java的影子，有C的味道，中间有比其它语言多的糟粕，使用预处理办法可以解决这些问题。其中Less[les]与Sass是CSS的预处理技术，而CoffeeScript、TypeScrip">
<meta name="keywords" content="前端,预处理,Less,Sass,TypeScript">
<meta property="og:type" content="article">
<meta property="og:title" content="前端预处理技术（Less、Sass、CoffeeScript、TypeScript）">
<meta property="og:url" content="https://netlover.cn/2018/09/05/qianduanyuchuli.html">
<meta property="og:site_name" content="Net Lover">
<meta property="og:description" content="CSS不像其它高级语言一样支持算术运算、变量、流程控制与面向对象特性，所以CSS样式较多时会引起一些问题，如修改复杂，冗余，某些别的语言很简单的功能实现不了等。而javascript则是一种半面向对象的动态语言，有java的影子，有C的味道，中间有比其它语言多的糟粕，使用预处理办法可以解决这些问题。其中Less[les]与Sass是CSS的预处理技术，而CoffeeScript、TypeScrip">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://i.imgur.com/m37VA6T.png">
<meta property="og:image" content="https://i.imgur.com/Xk7NeV3.png">
<meta property="og:image" content="https://i.imgur.com/pBzDC9o.png">
<meta property="og:image" content="https://i.imgur.com/hhOew6C.png">
<meta property="og:image" content="https://i.imgur.com/wrxG4UF.png">
<meta property="og:image" content="https://i.imgur.com/lnGgDOR.png">
<meta property="og:image" content="https://i.imgur.com/jIpfSUx.png">
<meta property="og:image" content="https://i.imgur.com/T5zIs9Y.png">
<meta property="og:image" content="https://i.imgur.com/TIhKBtc.png">
<meta property="og:image" content="https://i.imgur.com/gaFQ6NE.png">
<meta property="og:image" content="https://i.imgur.com/ockfBx1.png">
<meta property="og:image" content="https://i.imgur.com/sebngFZ.png">
<meta property="og:image" content="https://i.imgur.com/BKnlDAU.png">
<meta property="og:image" content="https://i.imgur.com/z97UcZ4.png">
<meta property="og:image" content="https://i.imgur.com/Xle5iyF.png">
<meta property="og:image" content="https://i.imgur.com/WjYfwcI.png">
<meta property="og:image" content="https://i.imgur.com/bGd5nee.png">
<meta property="og:image" content="https://i.imgur.com/ErrSxNV.png">
<meta property="og:image" content="https://i.imgur.com/Mmw8S9d.png">
<meta property="og:image" content="https://i.imgur.com/troFDwD.png">
<meta property="og:image" content="https://i.imgur.com/BLckZG7.png">
<meta property="og:image" content="https://i.imgur.com/UwcP3vJ.png">
<meta property="og:image" content="https://i.imgur.com/rgJ9sCz.png">
<meta property="og:image" content="https://i.imgur.com/WwCPgKh.png">
<meta property="og:image" content="https://i.imgur.com/YIxvpyA.png">
<meta property="og:image" content="https://i.imgur.com/G4tTvYk.png">
<meta property="og:image" content="https://i.imgur.com/MGLWLxR.png">
<meta property="og:image" content="https://i.imgur.com/EJGgjny.png">
<meta property="og:updated_time" content="2018-09-05T15:01:26.720Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端预处理技术（Less、Sass、CoffeeScript、TypeScript）">
<meta name="twitter:description" content="CSS不像其它高级语言一样支持算术运算、变量、流程控制与面向对象特性，所以CSS样式较多时会引起一些问题，如修改复杂，冗余，某些别的语言很简单的功能实现不了等。而javascript则是一种半面向对象的动态语言，有java的影子，有C的味道，中间有比其它语言多的糟粕，使用预处理办法可以解决这些问题。其中Less[les]与Sass是CSS的预处理技术，而CoffeeScript、TypeScrip">
<meta name="twitter:image" content="https://i.imgur.com/m37VA6T.png">

<link rel="alternative" href="/atom.xml" title="Net Lover" type="application/atom+xml">


<link rel="icon" href="/img/netlover.ico?2018.08.01">

<link rel="stylesheet" href="/css/style.css?2018.08.01">
<script src="/js/jquery1.8.2.min.js?2018.08.01"></script>
<script src="/js/jquery.qrcode.min.js?2018.08.01"></script>
<script src="/js/ug-theme-default.js?2018.08.01"></script>
<script src="/js/unitegallery.js?2018.08.01"></script>
<script src="/js/gitment.browser.js?2018.08.01"></script>
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/netlover.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Net Lover</a></h1>
		</hgroup>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/categories">分类</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/tags">标签</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="site-state motion-element">
						<div class="site-state-item site-state-posts">
							<a href="/archives">
							<span class="site-state-item-count">19</span>
							<span class="site-state-item-name">日志</span>
							</a>
						</div>
						<div class="site-state-item site-state-categories">
							<a href="/categories/index.html">
							<span class="site-state-item-count">9</span>
							<span class="site-state-item-name">分类</span>
							</a>
						</div>
						<div class="site-state-item site-state-tags">
							<a href="/tags/index.html">
							<span class="site-state-item-count">45</span>
							<span class="site-state-item-name">标签</span>
							</a>
						</div>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								
									<a class="github" target="_blank" href="https://github.com/Netlover" title="github">github</a>
								
					        
								
									<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
								
					        
								
									<a class="zhihu" target="_blank" href="https://zhuanlan.zhihu.com/netlover" title="zhihu">zhihu</a>
								
					        
								
									<a class="jianshu" target="_blank" href="https://www.jianshu.com/u/c86d7c57dd6d" title="jianshu">jianshu</a>
								
					        
						</div>
						<div class="gongzhonghao"><img src="/img/gongzhonghao.jpg"></div>
					</nav>
				</section>

				

				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">网络爱好者，.Net爱好者...</div>
				</section>
				
			</div>
		</div>
	</header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Net Lover</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/netlover.jpg" class="js-avatar">
				<hgroup>
				  <h1 class="header-author">Net Lover</h1>
				</hgroup>
			</div>
			
			<p class="header-subtitle">.Net Lover &amp; Net Lover</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/categories">分类</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/tags">标签</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Netlover" title="github">github</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="https://zhuanlan.zhihu.com/netlover" title="zhihu">zhihu</a>
			        
						<a class="jianshu" target="_blank" href="https://www.jianshu.com/u/c86d7c57dd6d" title="jianshu">jianshu</a>
			        
				</div>
			</nav>
		</header>
	</div>
</nav>

      <div class="body-wrap"><article id="post-前端预处理技术（Less、Sass、CoffeeScript、TypeScript）" class="article article-type-post" itemscope itemprop="blogPost">
    
        <div class="article-meta">
            <a href="/2018/09/05/qianduanyuchuli.html" class="article-date">
  	<time datetime="2018-09-05T13:35:44.000Z" itemprop="datePublished">2018-09-05 21:35</time>
</a>

        </div>
        
            <div class="article-inner">
                
                    <input type="hidden" class="isFancy" />
                    
                        
                            <header class="article-header">
                                
  
    <h1 class="article-title" itemprop="name">
      前端预处理技术（Less、Sass、CoffeeScript、TypeScript）
    </h1>
  


                            </header>
                            <div class="article-info article-info-post">
                                    
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端/">前端</a>
	</div>


                                    <div class="clearfix"></div>
                                </div>
                                    
                                        <div class="article-entry" itemprop="articleBody">
                                            
                                            
                                            
                                                        <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><h3 id="一、Less"><a href="#一、Less" class="headerlink" title="一、Less"></a>一、Less</h3><ol>
<li>概要</li>
<li>变量</li>
<li>解析Less<ul>
<li>插件安装</li>
<li>在线处理</li>
<li>预处理</li>
</ul>
</li>
<li>混入(Mixins)</li>
<li>嵌套　　　</li>
<li>运算</li>
<li>函数</li>
<li>继承　　　　</li>
<li>作用域</li>
<li>注释</li>
<li>循环</li>
<li>示例代码</li>
</ol>
<h3 id="二、Sass"><a href="#二、Sass" class="headerlink" title="二、Sass"></a>二、Sass</h3><ol>
<li>变量</li>
<li>嵌套</li>
<li>导入</li>
<li>mixin 混入</li>
<li>扩展/继承</li>
<li>运算</li>
<li>函数<ul>
<li>RGB函数</li>
<li>HSL函数简介（HSL用色轮表示颜色值）</li>
<li>Opacity函数简介（控制颜色的透明度）</li>
</ul>
</li>
<li>流程控制</li>
</ol>
<h3 id="三、CoffeeScript"><a href="#三、CoffeeScript" class="headerlink" title="三、CoffeeScript"></a>三、CoffeeScript</h3><ol>
<li>安装</li>
<li>使用</li>
</ol>
<h3 id="四、TypeScript"><a href="#四、TypeScript" class="headerlink" title="四、TypeScript"></a>四、TypeScript</h3><ol>
<li>安装</li>
<li>使用typescript</li>
</ol>
<h3 id="五、ECMAScript"><a href="#五、ECMAScript" class="headerlink" title="五、ECMAScript"></a>五、ECMAScript</h3><h3 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h3><blockquote>
<p>CSS不像其它高级语言一样支持算术运算、变量、流程控制与面向对象特性，所以CSS样式较多时会引起一些问题，如修改复杂，冗余，某些别的语言很简单的功能实现不了等。而javascript则是一种半面向对象的动态语言，有java的影子，有C的味道，中间有比其它语言多的糟粕，使用预处理办法可以解决这些问题。其中Less[les]与Sass是CSS的预处理技术，而CoffeeScript、TypeScript则是javascript的预处理技术。 </p>
</blockquote>
<p><img src="https://i.imgur.com/m37VA6T.png" alt=""></p>
<h3 id="一、Less-1"><a href="#一、Less-1" class="headerlink" title="一、Less"></a>一、Less</h3><h5 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h5><blockquote>
<p>Less是一种动态样式语言，Less 是一门 CSS 预处理语言，它扩展了 CSS 语言，增加了变量、Mixin、函数等特性，使 CSS 更易维护和扩展。</p>
<p>Less 将 CSS 赋予了动态语言的特性，如 变量， 继承， 运算， 函数。LESS 既可以在 客户端 上运行 (支持IE 6+, Webkit, Firefox)，也可以借助Node.js或者Rhino在服务端运行。 Less是一个JS库，所以他可以在客户端运行，相对Sass则必须在服务端借助Ruby运行</p>
</blockquote>
<p>中文网站：<a href="http://www.lesscss.net/" target="_blank" rel="noopener">http://www.lesscss.net/</a></p>
<p>英文官网：<a href="http://lesscss.org" target="_blank" rel="noopener">http://lesscss.org</a></p>
<p>less源码：<a href="https://github.com/cloudhead/less.js" target="_blank" rel="noopener">https://github.com/cloudhead/less.js</a></p>
<p>github地址：<a href="https://github.com/less/less.js" target="_blank" rel="noopener">https://github.com/less/less.js</a></p>
<h5 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. 变量</h5><p>语法：@变量名:值;</p>
<ol>
<li>以@作为变量的起始标识，变量名由字母、数字、_和-组成</li>
<li>没有先定义后使用的规定；</li>
<li>以最后定义的值为最终值；</li>
<li>可用于rule值、rule属性、rule属性部件、选择器、选择器部件、字符串拼接；</li>
<li>定义时 “@变量名: 变量值;” 的形式；引用时采用 “@变量名” 或 “@{变量名}” 的形式；</li>
<li>存在作用域，局部作用域优先级高于全局作用域。</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@color: #4d926f; </span><br><span class="line"><span class="selector-id">#header</span> &#123; <span class="attribute">color</span>: @color; &#125;</span><br><span class="line"><span class="selector-id">#header</span> &#123; <span class="attribute">color</span>: <span class="number">#4d926f</span>; &#125;</span><br><span class="line">@color: #253636; </span><br><span class="line">@color: #ff3636; //覆盖第一次的定义</span><br><span class="line">#header &#123;color: @color;&#125; //多次反复解析</span><br><span class="line"><span class="selector-id">#header</span> &#123;<span class="attribute">color</span>: <span class="number">#ff3636</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff3636</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4d926f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff3636</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff3636</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-解析Less"><a href="#3-解析Less" class="headerlink" title="3.解析Less"></a>3.解析Less</h5><p><strong>插件安装</strong></p>
<ol>
<li>先安装node.js(<a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a>)</li>
<li>安装less编译器 <code>npm install less -g</code></li>
<li>安装插件<br><img src="https://i.imgur.com/Xk7NeV3.png" alt=""><br><img src="https://i.imgur.com/pBzDC9o.png" alt=""></li>
<li>配置</li>
</ol>
<p>默认是正常的，如果发现Hbuilder不能自动翻译则需要配置<br><img src="https://i.imgur.com/hhOew6C.png" alt=""><br><img src="https://i.imgur.com/wrxG4UF.png" alt=""></p>
<p><strong>在线处理</strong></p>
<p>页面中直接引用less的源码，使用javascript动态翻译，这样在开发阶段非常方便，但是在运行阶段会影响效率，建议在开发阶段使用less.js在线处理，项目稳定运行时将less文件预处理。</p>
<p>步骤一：</p>
<blockquote>
<p>下载到less.js动态处理.less文件的javascript脚本，下载地址： <a href="https://github.com/less/less.js" target="_blank" rel="noopener">https://github.com/less/less.js</a></p>
</blockquote>
<p>步骤二：</p>
<blockquote>
<p>在页面中引入样式与less.js文件，如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"styles.less"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"less.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>测试运行</p>
<p>示例代码：</p>
<p>style1.less</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*1定义变量*/</span></span><br><span class="line">@color:red;</span><br><span class="line">@bgColor:lightgreen;  /*定义变量color，值为red*/</span><br><span class="line"><span class="selector-class">.cls11</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: @color;</span><br><span class="line">&#125;</span><br><span class="line">@color:lightblue;  /*重新定义，覆盖前面的定义，后定义的起作用*/</span><br><span class="line"><span class="selector-class">.cls12</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">background</span>: @bgColor;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid @color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>de2.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Less<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/style1.less"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/less/less.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">class</span>=<span class="string">"cls12"</span>&gt;</span></span><br><span class="line">            Hello Less</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行效果：</p>
<p><img src="https://i.imgur.com/lnGgDOR.png" alt=""></p>
<p>从上图可以看出less.js将style1.less文件翻译后变成了一个标准的CSS内部样式表。</p>
<p><strong>预处理</strong></p>
<p>在线处理的效率低，预处理就是将less文件先翻译成标准的CSS文件，再引入到项目中，处理的办法有许多：</p>
<p>方法一：使用lessc</p>
<p>a)、请先在电脑上安装node.js，下载地址： <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a></p>
<p><img src="https://i.imgur.com/jIpfSUx.png" alt=""><br><img src="https://i.imgur.com/T5zIs9Y.png" alt=""></p>
<p>a)、安装lessc</p>
<p>使用npm（node.js package management）node.js包管理器</p>
<p>在命令行模式下输入安装指令：<code>npm install less -g</code></p>
<p><img src="https://i.imgur.com/TIhKBtc.png" alt=""></p>
<p>使用lessc翻译less文件为css文件：</p>
<blockquote>
<p>lessc styles.less 显示</p>
<p>lessc styles.less &gt; styles.css 生成文件</p>
<p>参数 –x 普通压缩</p>
<p>参数 -h 帮助</p>
</blockquote>
<p><img src="https://i.imgur.com/gaFQ6NE.png" alt=""></p>
<p>-x的压缩方法已经被弃用，建议使用清理插件。</p>
<p>方法二：使用工具软件</p>
<p>能够翻译Less的工具软件有不少，这里介绍：Koala</p>
<p>Koala是一个开源的预处理语言图形编译工具，目前已支持Less、Sass、Compass与CoffeeScript。<br>功能特性：<br>多语言支持： 支持Less、Sass、Compass与CoffeeScript。<br>实时监听与编译： 在后台监听文件的变动，检测到文件被修改后将自动进行编译。<br>编译选项支持： 可以设置与自定义你需要的编译选项。<br>压缩支持： Less、Sass可直接编译生成压缩后的css代码。<br>错误提示： 编译中如果遇到错误，Koala将在右下角提示并显示出具体的出错地方，方便开发者快速定位。<br>跨平台： Windows、Mac、Linux完美支持。<br>安装Koala<br>在Koala官网根据你的系统平台下载对应的版本。Linux系统要求已安装好ruby运行环境。</p>
<p>下载地址： <a href="http://koala-app.com/" target="_blank" rel="noopener">http://koala-app.com/</a></p>
<p><img src="https://i.imgur.com/ockfBx1.png" alt=""><br><img src="https://i.imgur.com/sebngFZ.png" alt=""></p>
<p>注意：路径中不要使用中文，切记！</p>
<p>方法三：使用IDE插件</p>
<p>如果使用Eclipse,Hbuilder,Visual Studio等开发工具可以安装插件完成自动翻译功能，这里使用HBuilder，在工具-&gt;插件下可以选择安装，如下图所示：</p>
<p><img src="https://i.imgur.com/BKnlDAU.png" alt=""></p>
<p>使用方法：</p>
<p>新建Less文件，保存后会自己生成对应的CSS文件。</p>
<p>1.4、混入(Mixins)<br>类似函数或宏</p>
<p>定义函数，@radius是参数，3px是默认值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.borderRadius(@radius:3px)&#123;</span><br><span class="line"><span class="selector-tag">-moz-border-radius</span>: @<span class="keyword">radius</span>; </span><br><span class="line"><span class="selector-tag">-webkit-border-radius</span>: @<span class="keyword">radius</span>; </span><br><span class="line"><span class="selector-tag">border-radius</span>: @<span class="keyword">radius</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用函数，带参数</p>
<blockquote>
<p>#header { .borderRadius(10px); }</p>
</blockquote>
<p>不带参数使用默认参数</p>
<blockquote>
<p>.btn { .borderRadius}</p>
</blockquote>
<p>注意：</p>
<ul>
<li>可以不使用参数 .wrap(){…} .pre{ .wrap }，也可以使用多个参数</li>
<li>内置变量@arguments代表所有参数(运行时)的值 .boxShadow(@x:0,@y:0,@blur:1px,@color:#000){ box-shadow: @arguments; }</li>
</ul>
<blockquote>
<p>注意，在参数没有默认值的前提下使用@arguments调用时必须赋值，否则会导致整个页面内的less语法出错而失效。</p>
</blockquote>
<ul>
<li>Mixins必须使用ID或者类，即#xx或.xx，否则无效。</li>
</ul>
<p>Less示例代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*混入(Mixins)*/</span></span><br><span class="line"><span class="comment">/*定义*/</span></span><br><span class="line">.circle(@width:100px, @color:lightblue) &#123;</span><br><span class="line">    <span class="selector-tag">width</span>: @<span class="keyword">width</span>;</span><br><span class="line">    <span class="selector-tag">height</span>: @<span class="keyword">width</span>;</span><br><span class="line">    <span class="selector-tag">background</span>: @<span class="keyword">color</span>;</span><br><span class="line">    <span class="selector-tag">border-radius</span>: @<span class="keyword">width</span>/<span class="keyword">2</span>;</span><br><span class="line">    <span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">&#125;</span><br><span class="line">.boxShadow(@x:0, @y:0, @blur:1px, @color:#000) &#123;</span><br><span class="line">    <span class="selector-tag">box-shadow</span>: @<span class="keyword">arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*调用*/</span></span><br><span class="line"><span class="selector-class">.cls21</span> &#123;</span><br><span class="line">    .circle();</span><br><span class="line">    <span class="comment">/*默认值*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls22</span> &#123;</span><br><span class="line">    .circle(200px,lightgreen);</span><br><span class="line">    <span class="comment">/*带参数*/</span></span><br><span class="line">   <span class="selector-class">.boxShadow</span>(5<span class="selector-tag">px</span>,5<span class="selector-tag">px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls23</span> &#123;</span><br><span class="line">    .circle(300px);</span><br><span class="line">    <span class="comment">/*带一个参数*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HTML页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Less<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/style2.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">class</span>=<span class="string">"cls21"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">class</span>=<span class="string">"cls22"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">class</span>=<span class="string">"cls23"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>翻译结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*调用*/</span></span><br><span class="line"><span class="selector-class">.cls21</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: lightblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;<span class="comment">/*默认值*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls22</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: lightgreen;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="comment">/*带参数*/</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls23</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background</span>: lightblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;<span class="comment">/*带一个参数*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*# sourceMappingURL=style2.css.map */</span></span><br></pre></td></tr></table></figure>
<p>运行效果：</p>
<p><img src="https://i.imgur.com/z97UcZ4.png" alt=""></p>
<p>1.5、嵌套　　　<br>允许将多个CSS选择器嵌套在一起，&amp;表示当前选择器的父选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123; </span><br><span class="line">&amp;.fl&#123; float: left; &#125;</span><br><span class="line"><span class="selector-class">.mln</span> &#123; <span class="attribute">margin-left</span>: <span class="number">0</span>; &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span><span class="selector-class">.fl</span>&#123;<span class="attribute">float</span>: left;&#125; </span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.mln</span> &#123;<span class="attribute">margin-left</span>: <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure></p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*嵌套*/</span></span><br><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    .sub11 &#123;</span><br><span class="line">        <span class="selector-tag">background</span>: <span class="selector-tag">green</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.sub12</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.sub13</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">        .sub131 &#123;</span><br><span class="line">            <span class="selector-tag">font-size</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*嵌套*/</span></span><br><span class="line"><span class="selector-id">#parent</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#parent</span> <span class="selector-class">.sub11</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#parent</span><span class="selector-class">.sub12</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#parent</span> <span class="selector-class">.sub13</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#parent</span> <span class="selector-class">.sub13</span> <span class="selector-class">.sub131</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.6、运算</p>
<p>运算主要是针对任何数字、颜色、变量的操作，支持加、减、乘、除、()或者更复杂的综合运算；</p>
<blockquote>
<p>@init: #111111; </p>
<p>@transition: @init*2; </p>
<p>.switchColor { color: @transition; }</p>
</blockquote>
<p>算术运算示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*运算*/</span></span><br><span class="line">@base: 5%;</span><br><span class="line">@filler: @base * 2;</span><br><span class="line">@other: @base + @filler;</span><br><span class="line">@base-color:lightblue;</span><br><span class="line"><span class="selector-class">.cls41</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span> / <span class="number">4</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: @base-color + <span class="number">#111</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span> / <span class="number">2</span> + @filler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls41</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#222222</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#bee9f7</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.7、函数</p>
<p>Less 提供了许多用于转换颜色，处理字符串和进行算术运算的函数</p>
<blockquote>
<p>.lightColor{lighten(@color, 10%); }</p>
</blockquote>
<p>更多函数： <a href="http://www.lesscss.net/functions/" target="_blank" rel="noopener">http://www.lesscss.net/functions/</a></p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*函数*/</span></span><br><span class="line"><span class="selector-class">.cls51</span> &#123;</span><br><span class="line">    <span class="comment">/*将一个资源内嵌到样式文件，如果开启了ieCompat选项，而且资源文件的体积过大，或者是在浏览器中使用，则会使用url()进行回退。如果没有指定MIME，则Node.js会使用MIME包来决定正确的MIME。*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">data-uri</span>(<span class="string">'../img/yes.gif'</span>) no-repeat;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls52</span> &#123;</span><br><span class="line">    <span class="comment">/*增加一定数值的颜色亮度。*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">lighten</span>(blue,20%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>翻译结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*函数*/</span></span><br><span class="line"><span class="selector-class">.cls51</span> &#123;</span><br><span class="line">  <span class="comment">/*将一个资源内嵌到样式文件，如果开启了ieCompat选项，而且资源文件的体积过大，或者是在浏览器中使用，则会使用url()进行回退。如果没有指定MIME，则Node.js会使用MIME包来决定正确的MIME。*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"data:null;base64,R0lGODlhDAAMAKIAAMznjyJ6Gu732TKGFq7ZTF+nDI7JBf///yH5BAAAAAAALAAAAAAMAAwAAAM8eCdAZgQItdy7RAlXyhidBhjdEAQD1ZDHGVDQUyivMlws1d6xR6EFyKi06xgkHA8oSJhscI8mhWGJTA4JADs="</span>) no-repeat;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls52</span> &#123;</span><br><span class="line">  <span class="comment">/*增加一定数值的颜色亮度。*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#6666ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行效果：</p>
<p><img src="https://i.imgur.com/Xle5iyF.png" alt=""></p>
<p>1.8、继承　<br>　　　<br>示例代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*继承*/</span></span><br><span class="line"><span class="selector-class">.animal</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: black;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bear</span> &#123;</span><br><span class="line">    &amp;:extend(.animal);</span><br><span class="line">    <span class="selector-tag">background-color</span>: <span class="selector-tag">brown</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mouse</span>&#123;</span><br><span class="line">    &amp;:extend(.animal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>翻译结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*继承*/</span></span><br><span class="line"><span class="selector-class">.animal</span>,</span><br><span class="line"><span class="selector-class">.bear</span>,</span><br><span class="line"><span class="selector-class">.mouse</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bear</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: brown;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.9、作用域</p>
<p>同一级的变量后者覆盖前者，内部变量优先级高于外部变量，变量只在同一个文件中生效。</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*作用域*/</span></span><br><span class="line">@len:10px;</span><br><span class="line"><span class="selector-class">.cls61</span>&#123;</span><br><span class="line">    @len:20px;</span><br><span class="line">    <span class="selector-tag">height</span>:@<span class="keyword">len</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls62</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:@len;</span><br><span class="line">&#125;</span><br><span class="line">@len:30px;</span><br><span class="line"><span class="selector-class">.cls63</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: @len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls61</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls62</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cls63</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.10、注释</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*注释*/</span></span><br><span class="line"><span class="selector-class">.cls71</span>&#123;</span><br><span class="line">   width: 100px;  //单行注释，CSS中不允许单行注释，Less允许</span><br><span class="line">    <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>; <span class="comment">/* 多行注释，CSS与Less都允许 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*注释*/</span></span><br><span class="line"><span class="selector-class">.cls71</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;<span class="comment">/* 多行注释，CSS与Less都允许 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.11、循环</p>
<p>在Less中，混合可以调用它自身。这样，当一个混合递归调用自己，再结合Guard表达式和模式匹配这两个特性，就可以写出循环结构。</p>
<p>less源码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(@<span class="keyword">counter</span>) when (@counter &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  .loop((@counter - 1));    // 递归调用自身</span><br><span class="line">  width: (10px * @counter); // 每次调用时产生的样式代码</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  .loop(3); // 调用循环</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">生成<span class="selector-tag">css</span>：</span><br><span class="line"></span><br><span class="line">``` <span class="selector-tag">css</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>less源码（生成栅格系统）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.generate-columns</span>(5);</span><br><span class="line"><span class="selector-class">.generate-columns</span>(@<span class="keyword">n</span>, @i: <span class="number">1</span>) when (@i =&lt; @n) &#123;</span><br><span class="line">    <span class="selector-class">.column-</span>@&#123;<span class="selector-tag">i</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: (@i * <span class="number">100%</span> / @n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.generate-columns</span>(@<span class="keyword">n</span>, (@i + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成css：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.column-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-5</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.12、示例代码</p>
<p>style.less：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*1.3、变量**/</span></span><br><span class="line"></span><br><span class="line">@color: red;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.4、混入(Mixins)**/</span></span><br><span class="line"></span><br><span class="line">.circle(@length: 100px, @color: lightblue) &#123;</span><br><span class="line">    <span class="selector-tag">width</span>: @<span class="keyword">length</span>;</span><br><span class="line">    <span class="selector-tag">height</span>: @<span class="keyword">length</span>;</span><br><span class="line">    <span class="selector-tag">background</span>: @<span class="keyword">color</span>;</span><br><span class="line">    <span class="selector-tag">border-radius</span>: @<span class="keyword">length</span>/<span class="keyword">3</span>;</span><br><span class="line">    <span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.boxshadow(@x: 3px, @y: 3px, @blur: 3px, @color: #999) &#123;</span><br><span class="line">    <span class="selector-tag">box-shadow</span>: @<span class="keyword">arguments</span>;</span><br><span class="line">    <span class="selector-tag">box-shadow</span>: @<span class="keyword">x</span> @y @blur @color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c1</span> &#123;</span><br><span class="line">    .circle();</span><br><span class="line">    <span class="comment">/**默认参数*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c2</span> &#123;</span><br><span class="line">    .circle(200px, lightgreen);</span><br><span class="line">    <span class="comment">/**指定所有参数*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c3</span> &#123;</span><br><span class="line">    .circle(300px);</span><br><span class="line">    <span class="comment">/**指定部分*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c4</span> &#123;</span><br><span class="line">    .circle(400px);</span><br><span class="line">    <span class="comment">/**指定部分*/</span></span><br><span class="line">    <span class="selector-class">.boxshadow</span>(5<span class="selector-tag">px</span>, 5<span class="selector-tag">px</span>, 5<span class="selector-tag">px</span>, <span class="selector-id">#00f</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c5</span> &#123;</span><br><span class="line">    .circle(500px);</span><br><span class="line">    <span class="comment">/**指定部分*/</span></span><br><span class="line">    <span class="selector-class">.boxshadow</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.5、嵌套　**/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: @color;</span><br><span class="line">    .sub1 &#123;</span><br><span class="line">        <span class="selector-tag">width</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-class">.sub11</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#00f</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.sub2</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@color: blue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.6、运算**/</span></span><br><span class="line"></span><br><span class="line">@i: 10rem;</span><br><span class="line">@pcolor: blue;</span><br><span class="line">@color: #0000ff;</span><br><span class="line"><span class="selector-class">.cls16</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: @i+<span class="number">10</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#000111</span>+<span class="number">#111000</span>;</span><br><span class="line">    <span class="attribute">color</span>: @pcolor+<span class="number">#00ff00</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.7、函数**/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lightColor</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">floor</span>(2.6)<span class="built_in">px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">data-uri</span>(<span class="string">'dot2.gif'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.8、继承　**/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.animal</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.duck</span> &#123;</span><br><span class="line">    &amp;:extend(.animal);</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">yellow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tduck</span> &#123;</span><br><span class="line">    &amp;:extend(.duck);</span><br><span class="line">    <span class="selector-tag">min-height</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pig</span> &#123;</span><br><span class="line">    &amp;:extend(.animal);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.9、作用域*/</span></span><br><span class="line"></span><br><span class="line">@len: 10px;</span><br><span class="line"><span class="selector-class">.cls61</span> &#123;</span><br><span class="line">    @len: 20px;</span><br><span class="line">    <span class="selector-tag">height</span>: @<span class="keyword">len</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@len: 30px;</span><br><span class="line"><span class="selector-class">.cls62</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: @len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@len: 40px;</span><br><span class="line"><span class="selector-class">.cls63</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: @len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@len: 50px;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.10、注释**/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c</span> &#123;</span><br><span class="line">    width: 100px; //宽100px</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*1.11、循环*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loop</span>(@<span class="keyword">counter</span>) when (@counter &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    width: (10px * @counter); // 每次调用时产生的样式代码</span><br><span class="line">    .loop((@counter - 1)); // 递归调用自身</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    .loop(3); // 调用循环</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(5);</span><br><span class="line"><span class="selector-class">.generate-columns</span>(@<span class="keyword">n</span>, @i: <span class="number">1</span>) when (@i =&lt; @n) &#123;</span><br><span class="line">    <span class="selector-class">.column-</span>@&#123;<span class="selector-tag">i</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: (@i * <span class="number">100%</span> / @n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.generate-columns</span>(@<span class="keyword">n</span>, (@i + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>style.css:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">/*1.3、变量**/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.4、混入(Mixins)**/</span><br><span class="line"></span><br><span class="line">.c1 &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    background: lightblue;</span><br><span class="line">    border-radius: 33.33333333px;</span><br><span class="line">    float: left;</span><br><span class="line">    /**默认参数*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.c2 &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background: lightgreen;</span><br><span class="line">    border-radius: 66.66666667px;</span><br><span class="line">    float: left;</span><br><span class="line">    /**指定所有参数*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.c3 &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    background: lightblue;</span><br><span class="line">    border-radius: 100px;</span><br><span class="line">    float: left;</span><br><span class="line">    /**指定部分*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.c4 &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    background: lightblue;</span><br><span class="line">    border-radius: 133.33333333px;</span><br><span class="line">    float: left;</span><br><span class="line">    /**指定部分*/</span><br><span class="line">    box-shadow: 5px 5px 5px #00f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.c5 &#123;</span><br><span class="line">    width: 500px;</span><br><span class="line">    height: 500px;</span><br><span class="line">    background: lightblue;</span><br><span class="line">    border-radius: 166.66666667px;</span><br><span class="line">    float: left;</span><br><span class="line">    /**指定部分*/</span><br><span class="line">    box-shadow: 3px 3px 3px #999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.5、嵌套　**/</span><br><span class="line"></span><br><span class="line">#main &#123;</span><br><span class="line">    color: #0000ff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#main .sub1 &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#main .sub1 .sub11 &#123;</span><br><span class="line">    background: #00f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#main.sub2 &#123;</span><br><span class="line">    height: 100px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.6、运算**/</span><br><span class="line"></span><br><span class="line">.cls16 &#123;</span><br><span class="line">    width: 15rem;</span><br><span class="line">    background: #111111;</span><br><span class="line">    color: #00ffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.7、函数**/</span><br><span class="line"></span><br><span class="line">.lightColor &#123;</span><br><span class="line">    width: 2 px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bg &#123;</span><br><span class="line">    background: url(&quot;data:image/gif;base64,R0lGODlhCQALAJEAAAAAAP///wCO/////yH5BAEAAAMALAAAAAAJAAsAAAITnI8naeLsllq0vlhHnhJFpoFMAQA7&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.8、继承　**/</span><br><span class="line"></span><br><span class="line">.animal,</span><br><span class="line">.duck,</span><br><span class="line">.pig,</span><br><span class="line">.tduck &#123;</span><br><span class="line">    color: black;</span><br><span class="line">    background: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.duck,</span><br><span class="line">.tduck &#123;</span><br><span class="line">    color: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tduck &#123;</span><br><span class="line">    min-height: 100px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.9、作用域*/</span><br><span class="line"></span><br><span class="line">.cls61 &#123;</span><br><span class="line">    height: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.cls62 &#123;</span><br><span class="line">    width: 50px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.cls63 &#123;</span><br><span class="line">    height: 50px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.10、注释**/</span><br><span class="line"></span><br><span class="line">.c &#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*1.11、循环*/</span><br><span class="line"></span><br><span class="line">div &#123;</span><br><span class="line">    width: 30px;</span><br><span class="line">    width: 20px;</span><br><span class="line">    width: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.column-1 &#123;</span><br><span class="line">    width: 20%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.column-2 &#123;</span><br><span class="line">    width: 40%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.column-3 &#123;</span><br><span class="line">    width: 60%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.column-4 &#123;</span><br><span class="line">    width: 80%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.column-5 &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二、Sass-1"><a href="#二、Sass-1" class="headerlink" title="二、Sass"></a>二、Sass</h3><p>Sass与Less类似类似也是一种CSS的预编译语言，他出现的更晚，但功能更加强大，Sass 有两种语法。 第一种被称为 SCSS (Sassy CSS)，是一个 CSS3 语法的扩充版本；第二种比较老的语法成为缩排语法（或者就称为 “Sass”）， 提供了一种更简洁的 CSS 书写方式特点如下：</p>
<p><strong>特点：</strong></p>
<ol>
<li>不能直接在页面中解析，需要使用ruby预先翻译成css文件，而Less可以在线动态翻译。</li>
<li>Sass功能更加强大，拥有流控语句等Less不具备的功能</li>
<li>完全兼容 CSS3，在 CSS 语言基础上添加了扩展功能，比如变量、嵌套 (nesting)、混合 (mixin)</li>
</ol>
<p>在使用时Sass的后缀名为scss，本文全部使用scss的语法，可以安装Koala直接解析，不需要去搭建ruby环境，Koala已封装好。</p>
<p>下载地址： <a href="http://koala-app.com/" target="_blank" rel="noopener">http://koala-app.com/</a></p>
<p><img src="https://i.imgur.com/WjYfwcI.png" alt=""></p>
<h5 id="2-1、变量"><a href="#2-1、变量" class="headerlink" title="2.1、变量"></a>2.1、变量</h5><p>sass中可以定义变量，方便统一修改和维护</p>
<p>Sass代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*变量*/</span></span><br><span class="line">$width:1004px;</span><br><span class="line">$color:blue;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls11</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">width</span>: $width;</span><br><span class="line">    <span class="attribute">height</span>: $width/<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">background</span>: $color;</span><br><span class="line">&#125;</span><br><span class="line">$width:100px;</span><br><span class="line">$color:red;</span><br><span class="line"><span class="selector-class">.cls12</span></span><br><span class="line">&#123;</span><br><span class="line">    $color:green;</span><br><span class="line">    width: $width;</span><br><span class="line">    height: $width/2;</span><br><span class="line">    background: $color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls11</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1004px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">502px</span>;</span><br><span class="line">  <span class="attribute">background</span>: blue; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls12</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: green; &#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-2、嵌套"><a href="#2-2、嵌套" class="headerlink" title="2.2、嵌套"></a>2.2、嵌套</h5><p>sass可以进行选择器的嵌套，表示层级关系，看起来很优雅整齐。</p>
<p>Sass代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls21</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    .cls22&#123;</span><br><span class="line">        <span class="selector-tag">height</span>: 200<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.cls23</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attribute">color</span>:blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls21</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls21</span> <span class="selector-class">.cls22</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls21</span> <span class="selector-class">.cls23</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>复杂的嵌套：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.news</span>&#123;</span><br><span class="line"></span><br><span class="line">  //忽略root嵌套</span><br><span class="line">  @<span class="keyword">at</span>-<span class="keyword">root</span></span><br><span class="line">    .news_title&#123;</span><br><span class="line">      <span class="selector-tag">width</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  // 合并嵌套</span><br><span class="line">  <span class="selector-class">.news_content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //组合嵌套</span><br><span class="line">  &amp;_<span class="selector-tag">content1</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    &amp;_content2&#123;</span><br><span class="line">      <span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.news</span> <span class="selector-class">.news_content</span> &#123;</span><br><span class="line">    // 在根节点.news下</span><br><span class="line">    <span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.news_content1</span> &#123;</span><br><span class="line">    // 组合了根节点.news成为当前标签的一部分</span><br><span class="line">    <span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.news_content1_content2</span> &#123;</span><br><span class="line">    // 多层组合&amp;值为上一层的标签名称</span><br><span class="line">    <span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-3、导入"><a href="#2-3、导入" class="headerlink" title="2.3、导入"></a>2.3、导入</h5><p>sass中如导入其他sass文件，最后编译为一个css文件，优于纯css的@import</p>
<p>reset.scss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$zero:0;</span><br><span class="line">$PI:3.14;</span><br><span class="line">*</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">margin</span>: $zero;</span><br><span class="line">    <span class="attribute">padding</span>: $zero;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">html</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Sass代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">"reset"</span>;</span><br><span class="line"><span class="selector-class">.cls31</span> &#123;</span><br><span class="line">    <span class="comment">/*height: zero; */</span></span><br><span class="line">    <span class="comment">/*error*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> CSS代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>, <span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls31</span> &#123;</span><br><span class="line">  <span class="comment">/*height: zero; */</span></span><br><span class="line">  <span class="comment">/*error*/</span> &#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-4、mixin-混入"><a href="#2-4、mixin-混入" class="headerlink" title="2.4、mixin 混入"></a>2.4、mixin 混入</h5><p>sass中可用mixin定义一些代码片段，且可传参数，方便日后根据需求调用。从此处理css3的前缀兼容轻松便捷。定义时使用关键字@mixin，调用时使用@include</p>
<p>SCSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> circle($size:<span class="number">100px</span>,$color:lightblue)&#123;</span><br><span class="line">    width: $size;</span><br><span class="line">    height: $size;</span><br><span class="line">    border-radius: $size/2;</span><br><span class="line">    background: $color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls41</span>&#123;</span><br><span class="line">    @include circle();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls42</span>&#123;</span><br><span class="line">    @include circle(150px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls43</span>&#123;</span><br><span class="line">    @include circle(200px,lightgreen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS样式： </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls41</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls42</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">75px</span>;</span><br><span class="line">    <span class="attribute">background</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls43</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: lightgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-5、扩展-继承"><a href="#2-5、扩展-继承" class="headerlink" title="2.5、扩展/继承"></a>2.5、扩展/继承</h5><p>sass可通过@extend来实现代码组合声明，使代码更加优越简洁。</p>
<p>SCSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.state</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.success</span>&#123;</span><br><span class="line">    @extend .state;</span><br><span class="line">    <span class="selector-tag">background</span>: <span class="selector-tag">green</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.error</span></span><br><span class="line">&#123;</span><br><span class="line">    @extend .state;</span><br><span class="line">    <span class="selector-tag">border</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">red</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS样式： </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.state</span>,</span><br><span class="line"><span class="selector-class">.success</span>,</span><br><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.success</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-6、运算"><a href="#2-6、运算" class="headerlink" title="2.6、运算"></a>2.6、运算</h5><p>SCSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls61</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">width</span>: (<span class="number">100px</span>+<span class="number">10px</span>)/<span class="number">2</span>-<span class="number">20px</span>%<span class="number">7px</span>+<span class="number">1px</span>*<span class="number">8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS样式： </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls61</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">57px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-7、函数"><a href="#2-7、函数" class="headerlink" title="2.7、函数"></a>2.7、函数</h5><p>sass中集成了大量的颜色函数，让变换颜色更加简单。</p>
<p>SCSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$pcolor: #999ccc;</span><br><span class="line"><span class="selector-class">.cls71</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: $pcolor;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">        background: darken($pcolor,15%);</span><br><span class="line">        <span class="comment">/*变暗15%*/</span></span><br><span class="line">        color: lighten($pcolor,5%);</span><br><span class="line">        <span class="comment">/*变亮5%*/</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>CSS样式： </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cls71</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cls71</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#666bb3</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#aaacd5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.7.1. RGB函数</strong></p>
<blockquote>
<p>rgb(＄red, ＄green, ＄blue) //根据RGB中的三个值计算出一个颜色；</p>
<p>rgba(＄red, ＄green, ＄blue, ＄alpha) //根据RGB中红、绿、蓝和透明度计算出一个颜色；</p>
<p>red(＄color) //获取RGB中的红色值；</p>
<p>green(＄color) //获取RGB中的绿色值；</p>
<p>blue(＄color) //获取RGB中的蓝色值；</p>
<p>mix(＄color1, ＄color2, [＄weight]) //混合两种颜色；</p>
</blockquote>
<p><strong>2.7.2. HSL函数简介（HSL用色轮表示颜色值）</strong></p>
<blockquote>
<p>hsl(hue,saturation, ＄lightness): 根据色相、饱和度和亮度的值返回对应的HEX颜色</p>
<p>hsla(hue,saturation, lightness,alpha): 根据色相、饱和度、亮度和透明度的值返回对应的HEX颜色</p>
<p>hue(＄color)：从HEX颜色值中取得色相值</p>
<p>saturation(＄color): 从一个HEX颜色值中取得饱和度值</p>
<p>lightness(＄color):从一个HEX颜色值中取得亮度值</p>
<p>ajust-hue(color,degrees):通过改变一个颜色的色相值，创建一个新的颜色</p>
<p>lighten(color,amount)：通过改变颜色的亮度值，让颜色变亮，创建一个一个新的颜色</p>
<p>darken(color,amount):通过改变颜色的亮度值，让颜色变暗，创建一个一个新的颜色</p>
<p>saturate(color,amount):通过改变颜色的饱和度值，让颜色更饱和，从而创建一个新的颜色</p>
<p>desaturate(color,amount)：通过改变颜色的饱和度值，让颜色更少的饱和，从而创建出一个新的颜色</p>
<p>grayscale(color)：将一个颜色变成灰色，相当于desaturate(color,100%);</p>
<p>complement(color)：返回一个补充色，相当于adjust?hue(color,180deg);</p>
<p>invert(＄color)：反回一个反相色，红、绿、蓝色值倒过来，而透明度不变</p>
</blockquote>
<p><strong>2.7.3.Opacity函数简介（控制颜色的透明度）</strong></p>
<blockquote>
<p>alpha(＄color)/opacity(＄color):获得透明度值</p>
<p>rgba(＄color,alpha)：改变颜色的透明度值</p>
<p>opacify(＄color,＄amount)/fade-in(＄color,＄amount):使颜色更不透明</p>
<p>transparentize(＄color,＄amount)/fade-out(＄color,＄amount):使颜色更加透明</p>
</blockquote>
<h5 id="2-8、流程控制"><a href="#2-8、流程控制" class="headerlink" title="2.8、流程控制"></a>2.8、流程控制</h5><p>sass中和其它程序语言一样也拥有流程控制语句，如if，for，each，while，指令，函数等。</p>
<p>SCSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$blur: lightblue;</span><br><span class="line">@<span class="keyword">for</span> $i from <span class="number">1</span> through <span class="number">10</span> &#123;</span><br><span class="line">    .font-#&#123;$i&#125; &#123;</span><br><span class="line">        <span class="comment">/*计算字体大小*/</span></span><br><span class="line">        font-size: 12px+$i*2px;</span><br><span class="line">        <span class="comment">/*颜色变暗*/</span></span><br><span class="line">        color: darken($blur,$i*2);</span><br><span class="line">        <span class="comment">/*如果i是3的倍数，则下划线*/</span></span><br><span class="line">        @<span class="keyword">if</span> $i%<span class="number">3</span>==<span class="number">0</span> &#123;</span><br><span class="line">            <span class="selector-tag">text-decoration</span>: <span class="selector-tag">underline</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*8*/</span></span><br><span class="line"><span class="selector-class">.font-1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a5d4e4</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-2</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#9dd1e1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-3</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#96cddf</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-4</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#8ec9dc</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-5</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#86c5da</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-6</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#7ec2d8</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-7</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#76bed5</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-8</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#6ebad3</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-9</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#67b7d1</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.font-10</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#5fb3ce</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>HTML页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/style3.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"padding: 10px;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-1"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-2"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-3"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-4"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-5"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-6"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-7"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-8"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-9"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"font-10"</span>&gt;</span>Hello SASS!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行效果：</p>
<p><img src="https://i.imgur.com/bGd5nee.png" alt=""></p>
<p>更多内容请参考：<a href="https://www.sass.hk" target="_blank" rel="noopener">https://www.sass.hk</a> <a href="http://sass.bootcss.com/" target="_blank" rel="noopener">http://sass.bootcss.com/</a>  <a href="http://sass-lang.com/" target="_blank" rel="noopener">http://sass-lang.com/</a></p>
<h3 id="三、CoffeeScript-1"><a href="#三、CoffeeScript-1" class="headerlink" title="三、CoffeeScript"></a>三、CoffeeScript</h3><blockquote>
<p>javascript变得日益重要，但有很多明显的缺点，借助一种中间语言转译出优雅的javascript是解决这些问题的方法。如CoffeeScript，TypeScript。</p>
</blockquote>
<p>Coffee Script是JavaScript的转译语言。了解JavaScript的发展历程：<a href="https://news.cnblogs.com/n/558565/。" target="_blank" rel="noopener">https://news.cnblogs.com/n/558565/。</a></p>
<p><strong>Coffee的特点：</strong></p>
<ul>
<li>CoffeeScript语法类似 Ruby ，可以被编译成 JavaScript</li>
<li>CoffeeScript取JavaScript之精华，而抛弃了诸如全局变量声明、with等容易出错的部分</li>
<li>CoffeeScript是JavaScript与程序员之间的桥梁，程序员看到的是优雅的CoffeeScript接口，使得编程更简洁，写法更随意</li>
<li>更少，更紧凑，和更清晰的代码</li>
<li>通过规避和改变对JavaScript中不良部分的使用，只留下精华，让代码减少出错率，更容易维护</li>
<li>在很多常用模式的实现上采用了JavaScript中的最佳实践</li>
<li>CoffeeScript生成的JavaScript代码都可以完全通过JSLint的检测</li>
</ul>
<p><img src="https://i.imgur.com/ErrSxNV.png" alt=""></p>
<p>中文网： <a href="http://coffee-script.org/" target="_blank" rel="noopener">http://coffee-script.org/</a></p>
<p>官网： <a href="http://coffeescript.org/" target="_blank" rel="noopener">http://coffeescript.org/</a></p>
<p>源码：<a href="https://github.com/coffee-js/coffee-script" target="_blank" rel="noopener">https://github.com/coffee-js/coffee-script</a></p>
<h5 id="3-1、安装"><a href="#3-1、安装" class="headerlink" title="3.1、安装"></a>3.1、安装</h5><p>CoffeeScript 编译器本身是 CoffeeScript 写的, 使用了 Jison parser generator. 命令行版本的coffee是一个实用的 Node.js 工具。</p>
<p>安装前你需要最新稳定版 Node.js, 和 npm (Node Package Manager)。借助 npm 可以安装 CoffeeScript:</p>
<blockquote>
<p>npm install -g coffee-script</p>
</blockquote>
<p><img src="https://i.imgur.com/Mmw8S9d.png" alt=""></p>
<p>安装之后, 你应该可以运行 coffee 命令以执行脚本, 编译 .coffee 文件到 .js 文件, 和提供一个交互式的 REPL. coffee 命令有下列参数:</p>
<blockquote>
<p>-c, –compile 编译一个 .coffee 脚本到一个同名的 .js 文件.</p>
<p>-m, –map 随 JavaScript 文件一起生成 source maps. 并且在 JavaScript 里加上 sourceMappingURL 指令.</p>
<p>-i, –interactive 启动一个交互式的 CoffeeScript 会话用来尝试一些代码片段. 等同于执行 coffee 而不加参数.</p>
<p>-o, –output [DIR] 将所有编译后的 JavaScript 文件写到指定文件夹. 与 –compile 或 –watch 搭配使用.</p>
<p>-j, –join [FILE] 编译之前, 按参数传入顺序连接所有脚本到一起, 编译后写到指定的文件. 对于编译大型项目有用.</p>
<p>-w, –watch 监视文件改变, 任何文件更新时重新执行命令.</p>
<p>-p, –print JavaScript 直接打印到 stdout 而不是写到一个文件.</p>
<p>-s, –stdio 将 CoffeeScript 传递到 STDIN 后从 STDOUT 获取 JavaScript. 对其他语言写的进程有好处. 比如:cat src/cake.coffee | coffee -sc</p>
<p>-l, –literate 将代码作为 Literate CoffeeScript 解析. 只会在从 stdio 直接传入代码或者处理某些没有后缀的文件名需要写明这点.</p>
<p>-e, –eval 直接从命令行编译和打印一小段 CoffeeScript. 比如:coffee -e “console.log num for num in [10..1]”</p>
<p>-b, –bare 编译到 JavaScript 时去掉顶层函数的包裹.</p>
<p>-t, –tokens 不对 CoffeeScript 进行解析, 仅仅进行 lex, 打印出 token stream: [IDENTIFIER square] [ASSIGN =] [PARAM_START (] …</p>
<p>-n, –nodes 不对 CoffeeScript 进行编译, 仅仅 lex 和解析, 打印 parse tree:</p>
<p>–nodejs node 命令有一些实用的参数, 比如</p>
<p>–debug, –debug-brk, –max-stack-size, 和 –expose-gc. 用这个参数直接把参数转发到 Node.js. 重复使用 –nodejs 来传递多个参数.</p>
</blockquote>
<h5 id="3-2、使用"><a href="#3-2、使用" class="headerlink" title="3.2、使用"></a>3.2、使用</h5><p>1、编辑coffee脚本，后缀为coffee，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 赋值:</span><br><span class="line">number   = <span class="number">42</span></span><br><span class="line">opposite = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"># 条件:</span><br><span class="line">number = <span class="number">-42</span> <span class="keyword">if</span> opposite</span><br><span class="line"></span><br><span class="line"># 函数:</span><br><span class="line">square = (x) -&gt; x * x</span><br><span class="line"></span><br><span class="line"># 数组:</span><br><span class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"># 对象:</span><br><span class="line">math =</span><br><span class="line">  root:   <span class="built_in">Math</span>.sqrt</span><br><span class="line">  square: square</span><br><span class="line">  cube:   (x) -&gt; x * square x</span><br><span class="line"></span><br><span class="line"># Splats:</span><br><span class="line">race = (winner, runners...) -&gt;</span><br><span class="line">  print winner, runners</span><br><span class="line"></span><br><span class="line"># 存在性:</span><br><span class="line">alert <span class="string">"I knew it!"</span> <span class="keyword">if</span> elvis?</span><br><span class="line"></span><br><span class="line"># 数组 推导(comprehensions):</span><br><span class="line">cubes = (math.cube num <span class="keyword">for</span> num <span class="keyword">in</span> list)</span><br></pre></td></tr></table></figure>
<p>将coffeescript翻译成javascript的方法如下：</p>
<p>a)、使用IDE插件直接翻译</p>
<p><img src="https://i.imgur.com/troFDwD.png" alt=""></p>
<p>翻译成javascript后的脚本如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cubes, list, math, num, number, opposite, race, square,</span><br><span class="line">    slice = [].slice;</span><br><span class="line"></span><br><span class="line">  number = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line">  opposite = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (opposite) &#123;</span><br><span class="line">    number = <span class="number">-42</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  square = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">  math = &#123;</span><br><span class="line">    root: <span class="built_in">Math</span>.sqrt,</span><br><span class="line">    square: square,</span><br><span class="line">    cube: <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> x * square(x);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  race = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> runners, winner;</span><br><span class="line">    winner = <span class="built_in">arguments</span>[<span class="number">0</span>], runners = <span class="number">2</span> &lt;= <span class="built_in">arguments</span>.length ? slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>) : [];</span><br><span class="line">    <span class="keyword">return</span> print(winner, runners);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> elvis !== <span class="string">"undefined"</span> &amp;&amp; elvis !== <span class="literal">null</span>) &#123;</span><br><span class="line">    alert(<span class="string">"I knew it!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  cubes = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, len, results;</span><br><span class="line">    results = [];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = list.length; i &lt; len; i++) &#123;</span><br><span class="line">      num = list[i];</span><br><span class="line">      results.push(math.cube(num));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">&#125;).call(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p>b)、命令行翻译</p>
<p><img src="https://i.imgur.com/BLckZG7.png" alt=""></p>
<p>翻译后的结果与上文相同，-c是参数表示编译的意思，-w是监听文件的变化，文件发生变化后将立即编译。</p>
<p>面向对象示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line">  constructor: (@name) -&gt;</span><br><span class="line"></span><br><span class="line">  move: (meters) -&gt;</span><br><span class="line">    alert @name + <span class="string">" moved #&#123;meters&#125;m."</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Snake</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></span><br><span class="line">  move: -&gt;</span><br><span class="line">    alert <span class="string">"Slithering..."</span></span><br><span class="line">    <span class="keyword">super</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Horse</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></span><br><span class="line">  move: -&gt;</span><br><span class="line">    alert <span class="string">"Galloping..."</span></span><br><span class="line">    <span class="keyword">super</span> <span class="number">45</span></span><br><span class="line"></span><br><span class="line">sam = <span class="keyword">new</span> Snake <span class="string">"Sammy the Python"</span></span><br><span class="line">tom = <span class="keyword">new</span> Horse <span class="string">"Tommy the Palomino"</span></span><br><span class="line"></span><br><span class="line">sam.move()</span><br><span class="line">tom.move()</span><br></pre></td></tr></table></figure>
<p>翻译后的javascript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> Animal, Horse, Snake, sam, tom,</span><br><span class="line">        extend = <span class="function"><span class="keyword">function</span>(<span class="params">child, parent</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> parent) &#123;</span><br><span class="line">                <span class="keyword">if</span>(hasProp.call(parent, key)) child[key] = parent[key];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">ctor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.constructor = child;</span><br><span class="line">            &#125;</span><br><span class="line">            ctor.prototype = parent.prototype;</span><br><span class="line">            child.prototype = <span class="keyword">new</span> ctor();</span><br><span class="line">            child.__super__ = parent.prototype;</span><br><span class="line">            <span class="keyword">return</span> child;</span><br><span class="line">        &#125;,</span><br><span class="line">        hasProp = &#123;&#125;.hasOwnProperty;</span><br><span class="line"></span><br><span class="line">    Animal = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Animal.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params">meters</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> alert(<span class="keyword">this</span>.name + (<span class="string">" moved "</span> + meters + <span class="string">"m."</span>));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Animal;</span><br><span class="line"></span><br><span class="line">    &#125;)();</span><br><span class="line"></span><br><span class="line">    Snake = (<span class="function"><span class="keyword">function</span>(<span class="params">superClass</span>) </span>&#123;</span><br><span class="line">        extend(Snake, superClass);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Snake</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Snake.__super__.constructor.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Snake.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">"Slithering..."</span>);</span><br><span class="line">            <span class="keyword">return</span> Snake.__super__.move.call(<span class="keyword">this</span>, <span class="number">5</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Snake;</span><br><span class="line"></span><br><span class="line">    &#125;)(Animal);</span><br><span class="line"></span><br><span class="line">    Horse = (<span class="function"><span class="keyword">function</span>(<span class="params">superClass</span>) </span>&#123;</span><br><span class="line">        extend(Horse, superClass);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">Horse</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Horse.__super__.constructor.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Horse.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">"Galloping..."</span>);</span><br><span class="line">            <span class="keyword">return</span> Horse.__super__.move.call(<span class="keyword">this</span>, <span class="number">45</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Horse;</span><br><span class="line"></span><br><span class="line">    &#125;)(Animal);</span><br><span class="line"></span><br><span class="line">    sam = <span class="keyword">new</span> Snake(<span class="string">"Sammy the Python"</span>);</span><br><span class="line"></span><br><span class="line">    tom = <span class="keyword">new</span> Horse(<span class="string">"Tommy the Palomino"</span>);</span><br><span class="line"></span><br><span class="line">    sam.move();</span><br><span class="line"></span><br><span class="line">    tom.move();</span><br><span class="line"></span><br><span class="line">&#125;).call(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<h3 id="四、TypeScript-1"><a href="#四、TypeScript-1" class="headerlink" title="四、TypeScript"></a>四、TypeScript</h3><blockquote>
<p>TypeScript是一种由微软开发的自由和开源的编程语言，它是JavaScript的一个超集，扩展了JavaScript的语法，而且本质上向这个语言添加了可选的静态类型和基于类的面向对象编程。安德斯·海尔斯伯格，C#的首席架构师，工作于TypeScript的开发。</p>
</blockquote>
<p>官网：<a href="http://www.typescriptlang.org/" target="_blank" rel="noopener">http://www.typescriptlang.org/</a></p>
<p>github：<a href="https://github.com/Microsoft/TypeScript" target="_blank" rel="noopener">https://github.com/Microsoft/TypeScript</a></p>
<h5 id="4-1、安装"><a href="#4-1、安装" class="headerlink" title="4.1、安装"></a>4.1、安装</h5><ul>
<li>在node.js环境下安装typescript，<code>npm install -g typescript</code></li>
<li>使用Microsoft指定的编辑器或IDE如，VS与微软Visual Studio Code 免费跨平台代码编辑器，安装相应的插件。</li>
</ul>
<p><img src="https://i.imgur.com/UwcP3vJ.png" alt=""></p>
<h5 id="4-2、使用typescript"><a href="#4-2、使用typescript" class="headerlink" title="4.2、使用typescript"></a>4.2、使用typescript</h5><p>编写typescript源代码，greeter.ts：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(public greeting: string) &#123; &#125;</span><br><span class="line">    greet() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;h1&gt;"</span> + <span class="keyword">this</span>.greeting + <span class="string">"&lt;/h1&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> greeter = <span class="keyword">new</span> Greeter(<span class="string">"Hello, world!"</span>);</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = greeter.greet();</span><br></pre></td></tr></table></figure>
<p>使用tsc greeter.ts编译生成javascript greeter.js脚本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Greeter = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Greeter</span>(<span class="params">greeting</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.greeting = greeting;</span><br><span class="line">    &#125;</span><br><span class="line">    Greeter.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;h1&gt;"</span> + <span class="keyword">this</span>.greeting + <span class="string">"&lt;/h1&gt;"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> Greeter;</span><br><span class="line">&#125;());</span><br><span class="line">;</span><br><span class="line"><span class="keyword">var</span> greeter = <span class="keyword">new</span> Greeter(<span class="string">"Hello, world!"</span>);</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = greeter.greet();</span><br></pre></td></tr></table></figure>
<p>新建一个页面测试：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>TypeScript Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"typescript/greeter.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="https://i.imgur.com/rgJ9sCz.png" alt=""></p>
<p>示例2，raytracer.ts代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(public x: number,</span><br><span class="line">                public y: number,</span><br><span class="line">                public z: number) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> times(k: number, <span class="attr">v</span>: Vector) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Vector(k * v.x, k * v.y, k * v.z); &#125;</span><br><span class="line">    <span class="keyword">static</span> minus(v1: Vector, <span class="attr">v2</span>: Vector) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z); &#125;</span><br><span class="line">    <span class="keyword">static</span> plus(v1: Vector, <span class="attr">v2</span>: Vector) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z); &#125;</span><br><span class="line">    <span class="keyword">static</span> dot(v1: Vector, <span class="attr">v2</span>: Vector) &#123; <span class="keyword">return</span> v1.x * v2.x + v1.y * v2.y + v1.z * v2.z; &#125;</span><br><span class="line">    <span class="keyword">static</span> mag(v: Vector) &#123; <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(v.x * v.x + v.y * v.y + v.z * v.z); &#125;</span><br><span class="line">    <span class="keyword">static</span> norm(v: Vector) &#123;</span><br><span class="line">        <span class="keyword">var</span> mag = Vector.mag(v);</span><br><span class="line">        <span class="keyword">var</span> div = (mag === <span class="number">0</span>) ? <span class="literal">Infinity</span> : <span class="number">1.0</span> / mag;</span><br><span class="line">        <span class="keyword">return</span> Vector.times(div, v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> cross(v1: Vector, <span class="attr">v2</span>: Vector) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.y * v2.z - v1.z * v2.y,</span><br><span class="line">                          v1.z * v2.x - v1.x * v2.z,</span><br><span class="line">                          v1.x * v2.y - v1.y * v2.x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(public r: number,</span><br><span class="line">                public g: number,</span><br><span class="line">                public b: number) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> scale(k: number, <span class="attr">v</span>: Color) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Color(k * v.r, k * v.g, k * v.b); &#125;</span><br><span class="line">    <span class="keyword">static</span> plus(v1: Color, <span class="attr">v2</span>: Color) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Color(v1.r + v2.r, v1.g + v2.g, v1.b + v2.b); &#125;</span><br><span class="line">    <span class="keyword">static</span> times(v1: Color, <span class="attr">v2</span>: Color) &#123; <span class="keyword">return</span> <span class="keyword">new</span> Color(v1.r * v2.r, v1.g * v2.g, v1.b * v2.b); &#125;</span><br><span class="line">    <span class="keyword">static</span> white = <span class="keyword">new</span> Color(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">static</span> grey = <span class="keyword">new</span> Color(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="keyword">static</span> black = <span class="keyword">new</span> Color(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">    <span class="keyword">static</span> background = Color.black;</span><br><span class="line">    <span class="keyword">static</span> defaultColor = Color.black;</span><br><span class="line">    <span class="keyword">static</span> toDrawingColor(c: Color) &#123;</span><br><span class="line">        <span class="keyword">var</span> legalize = <span class="function"><span class="params">d</span> =&gt;</span> d &gt; <span class="number">1</span> ? <span class="number">1</span> : d;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            r: <span class="built_in">Math</span>.floor(legalize(c.r) * <span class="number">255</span>),</span><br><span class="line">            g: <span class="built_in">Math</span>.floor(legalize(c.g) * <span class="number">255</span>),</span><br><span class="line">            b: <span class="built_in">Math</span>.floor(legalize(c.b) * <span class="number">255</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Camera</span> </span>&#123;</span><br><span class="line">    public forward: Vector;</span><br><span class="line">    public right: Vector;</span><br><span class="line">    public up: Vector;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(public pos: Vector, lookAt: Vector) &#123;</span><br><span class="line">        <span class="keyword">var</span> down = <span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">        <span class="keyword">this</span>.forward = Vector.norm(Vector.minus(lookAt, <span class="keyword">this</span>.pos));</span><br><span class="line">        <span class="keyword">this</span>.right = Vector.times(<span class="number">1.5</span>, Vector.norm(Vector.cross(<span class="keyword">this</span>.forward, down)));</span><br><span class="line">        <span class="keyword">this</span>.up = Vector.times(<span class="number">1.5</span>, Vector.norm(Vector.cross(<span class="keyword">this</span>.forward, <span class="keyword">this</span>.right)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Ray &#123;</span><br><span class="line">    start: Vector;</span><br><span class="line">    dir: Vector;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Intersection &#123;</span><br><span class="line">    thing: Thing;</span><br><span class="line">    ray: Ray;</span><br><span class="line">    dist: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Surface &#123;</span><br><span class="line">    diffuse: <span class="function">(<span class="params">pos: Vector</span>) =&gt;</span> Color;</span><br><span class="line">    specular: <span class="function">(<span class="params">pos: Vector</span>) =&gt;</span> Color;</span><br><span class="line">    reflect: <span class="function">(<span class="params">pos: Vector</span>) =&gt;</span> number;</span><br><span class="line">    roughness: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Thing &#123;</span><br><span class="line">    intersect: <span class="function">(<span class="params">ray: Ray</span>) =&gt;</span> Intersection;</span><br><span class="line">    normal: <span class="function">(<span class="params">pos: Vector</span>) =&gt;</span> Vector;</span><br><span class="line">    surface: Surface;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Light &#123;</span><br><span class="line">    pos: Vector;</span><br><span class="line">    color: Color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Scene &#123;</span><br><span class="line">    things: Thing[];</span><br><span class="line">    lights: Light[];</span><br><span class="line">    camera: Camera;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sphere</span> <span class="title">implements</span> <span class="title">Thing</span> </span>&#123;</span><br><span class="line">    public radius2: number;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(public center: Vector, radius: number, public surface: Surface) &#123;</span><br><span class="line">        <span class="keyword">this</span>.radius2 = radius * radius;</span><br><span class="line">    &#125;</span><br><span class="line">    normal(pos: Vector): Vector &#123; <span class="keyword">return</span> Vector.norm(Vector.minus(pos, <span class="keyword">this</span>.center)); &#125;</span><br><span class="line">    intersect(ray: Ray) &#123;</span><br><span class="line">        <span class="keyword">var</span> eo = Vector.minus(<span class="keyword">this</span>.center, ray.start);</span><br><span class="line">        <span class="keyword">var</span> v = Vector.dot(eo, ray.dir);</span><br><span class="line">        <span class="keyword">var</span> dist = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (v &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> disc = <span class="keyword">this</span>.radius2 - (Vector.dot(eo, eo) - v * v);</span><br><span class="line">            <span class="keyword">if</span> (disc &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dist = v - <span class="built_in">Math</span>.sqrt(disc);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dist === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">thing</span>: <span class="keyword">this</span>, <span class="attr">ray</span>: ray, <span class="attr">dist</span>: dist &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Plane</span> <span class="title">implements</span> <span class="title">Thing</span> </span>&#123;</span><br><span class="line">    public normal: <span class="function">(<span class="params">pos: Vector</span>) =&gt;</span>Vector;</span><br><span class="line">    public intersect: <span class="function">(<span class="params">ray: Ray</span>) =&gt;</span>Intersection;</span><br><span class="line">    <span class="keyword">constructor</span>(norm: Vector, offset: number, public surface: Surface) &#123;</span><br><span class="line">        <span class="keyword">this</span>.normal = <span class="function"><span class="keyword">function</span>(<span class="params">pos: Vector</span>) </span>&#123; <span class="keyword">return</span> norm; &#125;</span><br><span class="line">        <span class="keyword">this</span>.intersect = <span class="function"><span class="keyword">function</span>(<span class="params">ray: Ray</span>): <span class="title">Intersection</span> </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> denom = Vector.dot(norm, ray.dir);</span><br><span class="line">            <span class="keyword">if</span> (denom &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> dist = (Vector.dot(norm, ray.start) + offset) / (-denom);</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">thing</span>: <span class="keyword">this</span>, <span class="attr">ray</span>: ray, <span class="attr">dist</span>: dist &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span> Surfaces &#123;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">var</span> shiny: Surface = &#123;</span><br><span class="line">        diffuse: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123; <span class="keyword">return</span> Color.white; &#125;,</span><br><span class="line">        specular: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123; <span class="keyword">return</span> Color.grey; &#125;,</span><br><span class="line">        reflect: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123; <span class="keyword">return</span> <span class="number">0.7</span>; &#125;,</span><br><span class="line">        roughness: <span class="number">250</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">var</span> checkerboard: Surface = &#123;</span><br><span class="line">        diffuse: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="built_in">Math</span>.floor(pos.z) + <span class="built_in">Math</span>.floor(pos.x)) % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Color.white;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Color.black;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        specular: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123; <span class="keyword">return</span> Color.white; &#125;,</span><br><span class="line">        reflect: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="built_in">Math</span>.floor(pos.z) + <span class="built_in">Math</span>.floor(pos.x)) % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.7</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        roughness: <span class="number">150</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RayTracer</span> </span>&#123;</span><br><span class="line">    private maxDepth = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    private intersections(ray: Ray, <span class="attr">scene</span>: Scene) &#123;</span><br><span class="line">        <span class="keyword">var</span> closest = +<span class="literal">Infinity</span>;</span><br><span class="line">        <span class="keyword">var</span> closestInter: Intersection = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> scene.things) &#123;</span><br><span class="line">            <span class="keyword">var</span> inter = scene.things[i].intersect(ray);</span><br><span class="line">            <span class="keyword">if</span> (inter != <span class="literal">null</span> &amp;&amp; inter.dist &lt; closest) &#123;</span><br><span class="line">                closestInter = inter;</span><br><span class="line">                closest = inter.dist;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> closestInter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private testRay(ray: Ray, <span class="attr">scene</span>: Scene) &#123;</span><br><span class="line">        <span class="keyword">var</span> isect = <span class="keyword">this</span>.intersections(ray, scene);</span><br><span class="line">        <span class="keyword">if</span> (isect != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> isect.dist;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private traceRay(ray: Ray, <span class="attr">scene</span>: Scene, <span class="attr">depth</span>: number): Color &#123;</span><br><span class="line">        <span class="keyword">var</span> isect = <span class="keyword">this</span>.intersections(ray, scene);</span><br><span class="line">        <span class="keyword">if</span> (isect === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Color.background;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.shade(isect, scene, depth);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private shade(isect: Intersection, <span class="attr">scene</span>: Scene, <span class="attr">depth</span>: number) &#123;</span><br><span class="line">        <span class="keyword">var</span> d = isect.ray.dir;</span><br><span class="line">        <span class="keyword">var</span> pos = Vector.plus(Vector.times(isect.dist, d), isect.ray.start);</span><br><span class="line">        <span class="keyword">var</span> normal = isect.thing.normal(pos);</span><br><span class="line">        <span class="keyword">var</span> reflectDir = Vector.minus(d, Vector.times(<span class="number">2</span>, Vector.times(Vector.dot(normal, d), normal)));</span><br><span class="line">        <span class="keyword">var</span> naturalColor = Color.plus(Color.background,</span><br><span class="line">                                      <span class="keyword">this</span>.getNaturalColor(isect.thing, pos, normal, reflectDir, scene));</span><br><span class="line">        <span class="keyword">var</span> reflectedColor = (depth &gt;= <span class="keyword">this</span>.maxDepth) ? Color.grey : <span class="keyword">this</span>.getReflectionColor(isect.thing, pos, normal, reflectDir, scene, depth);</span><br><span class="line">        <span class="keyword">return</span> Color.plus(naturalColor, reflectedColor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private getReflectionColor(thing: Thing, <span class="attr">pos</span>: Vector, <span class="attr">normal</span>: Vector, <span class="attr">rd</span>: Vector, <span class="attr">scene</span>: Scene, <span class="attr">depth</span>: number) &#123;</span><br><span class="line">        <span class="keyword">return</span> Color.scale(thing.surface.reflect(pos), <span class="keyword">this</span>.traceRay(&#123; <span class="attr">start</span>: pos, <span class="attr">dir</span>: rd &#125;, scene, depth + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private getNaturalColor(thing: Thing, <span class="attr">pos</span>: Vector, <span class="attr">norm</span>: Vector, <span class="attr">rd</span>: Vector, <span class="attr">scene</span>: Scene) &#123;</span><br><span class="line">        <span class="keyword">var</span> addLight = <span class="function">(<span class="params">col, light</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> ldis = Vector.minus(light.pos, pos);</span><br><span class="line">            <span class="keyword">var</span> livec = Vector.norm(ldis);</span><br><span class="line">            <span class="keyword">var</span> neatIsect = <span class="keyword">this</span>.testRay(&#123; <span class="attr">start</span>: pos, <span class="attr">dir</span>: livec &#125;, scene);</span><br><span class="line">            <span class="keyword">var</span> isInShadow = (neatIsect === <span class="literal">undefined</span>) ? <span class="literal">false</span> : (neatIsect &lt;= Vector.mag(ldis));</span><br><span class="line">            <span class="keyword">if</span> (isInShadow) &#123;</span><br><span class="line">                <span class="keyword">return</span> col;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> illum = Vector.dot(livec, norm);</span><br><span class="line">                <span class="keyword">var</span> lcolor = (illum &gt; <span class="number">0</span>) ? Color.scale(illum, light.color)</span><br><span class="line">                                          : Color.defaultColor;</span><br><span class="line">                <span class="keyword">var</span> specular = Vector.dot(livec, Vector.norm(rd));</span><br><span class="line">                <span class="keyword">var</span> scolor = (specular &gt; <span class="number">0</span>) ? Color.scale(<span class="built_in">Math</span>.pow(specular, thing.surface.roughness), light.color)</span><br><span class="line">                                          : Color.defaultColor;</span><br><span class="line">                <span class="keyword">return</span> Color.plus(col, Color.plus(Color.times(thing.surface.diffuse(pos), lcolor),</span><br><span class="line">                                                  Color.times(thing.surface.specular(pos), scolor)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> scene.lights.reduce(addLight, Color.defaultColor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render(scene, ctx, screenWidth, screenHeight) &#123;</span><br><span class="line">        <span class="keyword">var</span> getPoint = <span class="function">(<span class="params">x, y, camera</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> recenterX = <span class="function"><span class="params">x</span> =&gt;</span>(x - (screenWidth / <span class="number">2.0</span>)) / <span class="number">2.0</span> / screenWidth;</span><br><span class="line">            <span class="keyword">var</span> recenterY = <span class="function"><span class="params">y</span> =&gt;</span> - (y - (screenHeight / <span class="number">2.0</span>)) / <span class="number">2.0</span> / screenHeight;</span><br><span class="line">            <span class="keyword">return</span> Vector.norm(Vector.plus(camera.forward, Vector.plus(Vector.times(recenterX(x), camera.right), Vector.times(recenterY(y), camera.up))));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> y = <span class="number">0</span>; y &lt; screenHeight; y++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; screenWidth; x++) &#123;</span><br><span class="line">                <span class="keyword">var</span> color = <span class="keyword">this</span>.traceRay(&#123; <span class="attr">start</span>: scene.camera.pos, <span class="attr">dir</span>: getPoint(x, y, scene.camera) &#125;, scene, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">var</span> c = Color.toDrawingColor(color);</span><br><span class="line">                ctx.fillStyle = <span class="string">"rgb("</span> + <span class="built_in">String</span>(c.r) + <span class="string">", "</span> + <span class="built_in">String</span>(c.g) + <span class="string">", "</span> + <span class="built_in">String</span>(c.b) + <span class="string">")"</span>;</span><br><span class="line">                ctx.fillRect(x, y, x + <span class="number">1</span>, y + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultScene</span>(<span class="params"></span>): <span class="title">Scene</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        things: [<span class="keyword">new</span> Plane(<span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>), <span class="number">0.0</span>, Surfaces.checkerboard),</span><br><span class="line">                 <span class="keyword">new</span> Sphere(<span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">-0.25</span>), <span class="number">1.0</span>, Surfaces.shiny),</span><br><span class="line">                 <span class="keyword">new</span> Sphere(<span class="keyword">new</span> Vector(<span class="number">-1.0</span>, <span class="number">0.5</span>, <span class="number">1.5</span>), <span class="number">0.5</span>, Surfaces.shiny)],</span><br><span class="line">        lights: [&#123; <span class="attr">pos</span>: <span class="keyword">new</span> Vector(<span class="number">-2.0</span>, <span class="number">2.5</span>, <span class="number">0.0</span>), <span class="attr">color</span>: <span class="keyword">new</span> Color(<span class="number">0.49</span>, <span class="number">0.07</span>, <span class="number">0.07</span>) &#125;,</span><br><span class="line">                 &#123; <span class="attr">pos</span>: <span class="keyword">new</span> Vector(<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">1.5</span>), <span class="attr">color</span>: <span class="keyword">new</span> Color(<span class="number">0.07</span>, <span class="number">0.07</span>, <span class="number">0.49</span>) &#125;,</span><br><span class="line">                 &#123; <span class="attr">pos</span>: <span class="keyword">new</span> Vector(<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">-1.5</span>), <span class="attr">color</span>: <span class="keyword">new</span> Color(<span class="number">0.07</span>, <span class="number">0.49</span>, <span class="number">0.071</span>) &#125;,</span><br><span class="line">                 &#123; <span class="attr">pos</span>: <span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">3.5</span>, <span class="number">0.0</span>), <span class="attr">color</span>: <span class="keyword">new</span> Color(<span class="number">0.21</span>, <span class="number">0.21</span>, <span class="number">0.35</span>) &#125;],</span><br><span class="line">        camera: <span class="keyword">new</span> Camera(<span class="keyword">new</span> Vector(<span class="number">3.0</span>, <span class="number">2.0</span>, <span class="number">4.0</span>), <span class="keyword">new</span> Vector(<span class="number">-1.0</span>, <span class="number">0.5</span>, <span class="number">0.0</span>))</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canv = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line">    canv.width = <span class="number">256</span>;</span><br><span class="line">    canv.height = <span class="number">256</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(canv);</span><br><span class="line">    <span class="keyword">var</span> ctx = canv.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="keyword">var</span> rayTracer = <span class="keyword">new</span> RayTracer();</span><br><span class="line">    <span class="keyword">return</span> rayTracer.render(defaultScene(), ctx, canv.width, canv.height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exec();</span><br></pre></td></tr></table></figure>
<p>编译生成后的raytracer.js代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Vector = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Vector</span>(<span class="params">x, y, z</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">        <span class="keyword">this</span>.z = z;</span><br><span class="line">    &#125;</span><br><span class="line">    Vector.times = <span class="function"><span class="keyword">function</span>(<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector(k * v.x, k * v.y, k * v.z);</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.minus = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.plus = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.dot = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.mag = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.norm = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> mag = Vector.mag(v);</span><br><span class="line">        <span class="keyword">var</span> div = (mag === <span class="number">0</span>) ? <span class="literal">Infinity</span> : <span class="number">1.0</span> / mag;</span><br><span class="line">        <span class="keyword">return</span> Vector.times(div, v);</span><br><span class="line">    &#125;;</span><br><span class="line">    Vector.cross = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector(v1.y * v2.z - v1.z * v2.y, v1.z * v2.x - v1.x * v2.z, v1.x * v2.y - v1.y * v2.x);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> Vector;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> Color = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Color</span>(<span class="params">r, g, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.r = r;</span><br><span class="line">        <span class="keyword">this</span>.g = g;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">    &#125;</span><br><span class="line">    Color.scale = <span class="function"><span class="keyword">function</span>(<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Color(k * v.r, k * v.g, k * v.b);</span><br><span class="line">    &#125;;</span><br><span class="line">    Color.plus = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Color(v1.r + v2.r, v1.g + v2.g, v1.b + v2.b);</span><br><span class="line">    &#125;;</span><br><span class="line">    Color.times = <span class="function"><span class="keyword">function</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Color(v1.r * v2.r, v1.g * v2.g, v1.b * v2.b);</span><br><span class="line">    &#125;;</span><br><span class="line">    Color.toDrawingColor = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> legalize = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> d &gt; <span class="number">1</span> ? <span class="number">1</span> : d;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            r: <span class="built_in">Math</span>.floor(legalize(c.r) * <span class="number">255</span>),</span><br><span class="line">            g: <span class="built_in">Math</span>.floor(legalize(c.g) * <span class="number">255</span>),</span><br><span class="line">            b: <span class="built_in">Math</span>.floor(legalize(c.b) * <span class="number">255</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> Color;</span><br><span class="line">&#125;());</span><br><span class="line">Color.white = <span class="keyword">new</span> Color(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">Color.grey = <span class="keyword">new</span> Color(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">Color.black = <span class="keyword">new</span> Color(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">Color.background = Color.black;</span><br><span class="line">Color.defaultColor = Color.black;</span><br><span class="line"><span class="keyword">var</span> Camera = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Camera</span>(<span class="params">pos, lookAt</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pos = pos;</span><br><span class="line">        <span class="keyword">var</span> down = <span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">-1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">        <span class="keyword">this</span>.forward = Vector.norm(Vector.minus(lookAt, <span class="keyword">this</span>.pos));</span><br><span class="line">        <span class="keyword">this</span>.right = Vector.times(<span class="number">1.5</span>, Vector.norm(Vector.cross(<span class="keyword">this</span>.forward, down)));</span><br><span class="line">        <span class="keyword">this</span>.up = Vector.times(<span class="number">1.5</span>, Vector.norm(Vector.cross(<span class="keyword">this</span>.forward, <span class="keyword">this</span>.right)));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Camera;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> Sphere = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Sphere</span>(<span class="params">center, radius, surface</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.center = center;</span><br><span class="line">        <span class="keyword">this</span>.surface = surface;</span><br><span class="line">        <span class="keyword">this</span>.radius2 = radius * radius;</span><br><span class="line">    &#125;</span><br><span class="line">    Sphere.prototype.normal = <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Vector.norm(Vector.minus(pos, <span class="keyword">this</span>.center));</span><br><span class="line">    &#125;;</span><br><span class="line">    Sphere.prototype.intersect = <span class="function"><span class="keyword">function</span>(<span class="params">ray</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> eo = Vector.minus(<span class="keyword">this</span>.center, ray.start);</span><br><span class="line">        <span class="keyword">var</span> v = Vector.dot(eo, ray.dir);</span><br><span class="line">        <span class="keyword">var</span> dist = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(v &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> disc = <span class="keyword">this</span>.radius2 - (Vector.dot(eo, eo) - v * v);</span><br><span class="line">            <span class="keyword">if</span>(disc &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dist = v - <span class="built_in">Math</span>.sqrt(disc);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(dist === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                thing: <span class="keyword">this</span>,</span><br><span class="line">                ray: ray,</span><br><span class="line">                dist: dist</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> Sphere;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> Plane = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Plane</span>(<span class="params">norm, offset, surface</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.surface = surface;</span><br><span class="line">        <span class="keyword">this</span>.normal = <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> norm;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">this</span>.intersect = <span class="function"><span class="keyword">function</span>(<span class="params">ray</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> denom = Vector.dot(norm, ray.dir);</span><br><span class="line">            <span class="keyword">if</span>(denom &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> dist = (Vector.dot(norm, ray.start) + offset) / (-denom);</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    thing: <span class="keyword">this</span>,</span><br><span class="line">                    ray: ray,</span><br><span class="line">                    dist: dist</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Plane;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> Surfaces;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">Surfaces</span>) </span>&#123;</span><br><span class="line">    Surfaces.shiny = &#123;</span><br><span class="line">        diffuse: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Color.white;</span><br><span class="line">        &#125;,</span><br><span class="line">        specular: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Color.grey;</span><br><span class="line">        &#125;,</span><br><span class="line">        reflect: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0.7</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        roughness: <span class="number">250</span></span><br><span class="line">    &#125;;</span><br><span class="line">    Surfaces.checkerboard = &#123;</span><br><span class="line">        diffuse: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>((<span class="built_in">Math</span>.floor(pos.z) + <span class="built_in">Math</span>.floor(pos.x)) % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Color.white;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Color.black;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        specular: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Color.white;</span><br><span class="line">        &#125;,</span><br><span class="line">        reflect: <span class="function"><span class="keyword">function</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>((<span class="built_in">Math</span>.floor(pos.z) + <span class="built_in">Math</span>.floor(pos.x)) % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.7</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        roughness: <span class="number">150</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)(Surfaces || (Surfaces = &#123;&#125;));</span><br><span class="line"><span class="keyword">var</span> RayTracer = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">RayTracer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maxDepth = <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    RayTracer.prototype.intersections = <span class="function"><span class="keyword">function</span>(<span class="params">ray, scene</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> closest = +<span class="literal">Infinity</span>;</span><br><span class="line">        <span class="keyword">var</span> closestInter = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> scene.things) &#123;</span><br><span class="line">            <span class="keyword">var</span> inter = scene.things[i].intersect(ray);</span><br><span class="line">            <span class="keyword">if</span>(inter != <span class="literal">null</span> &amp;&amp; inter.dist &lt; closest) &#123;</span><br><span class="line">                closestInter = inter;</span><br><span class="line">                closest = inter.dist;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> closestInter;</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.testRay = <span class="function"><span class="keyword">function</span>(<span class="params">ray, scene</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> isect = <span class="keyword">this</span>.intersections(ray, scene);</span><br><span class="line">        <span class="keyword">if</span>(isect != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> isect.dist;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.traceRay = <span class="function"><span class="keyword">function</span>(<span class="params">ray, scene, depth</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> isect = <span class="keyword">this</span>.intersections(ray, scene);</span><br><span class="line">        <span class="keyword">if</span>(isect === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Color.background;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.shade(isect, scene, depth);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.shade = <span class="function"><span class="keyword">function</span>(<span class="params">isect, scene, depth</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> d = isect.ray.dir;</span><br><span class="line">        <span class="keyword">var</span> pos = Vector.plus(Vector.times(isect.dist, d), isect.ray.start);</span><br><span class="line">        <span class="keyword">var</span> normal = isect.thing.normal(pos);</span><br><span class="line">        <span class="keyword">var</span> reflectDir = Vector.minus(d, Vector.times(<span class="number">2</span>, Vector.times(Vector.dot(normal, d), normal)));</span><br><span class="line">        <span class="keyword">var</span> naturalColor = Color.plus(Color.background, <span class="keyword">this</span>.getNaturalColor(isect.thing, pos, normal, reflectDir, scene));</span><br><span class="line">        <span class="keyword">var</span> reflectedColor = (depth &gt;= <span class="keyword">this</span>.maxDepth) ? Color.grey : <span class="keyword">this</span>.getReflectionColor(isect.thing, pos, normal, reflectDir, scene, depth);</span><br><span class="line">        <span class="keyword">return</span> Color.plus(naturalColor, reflectedColor);</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.getReflectionColor = <span class="function"><span class="keyword">function</span>(<span class="params">thing, pos, normal, rd, scene, depth</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Color.scale(thing.surface.reflect(pos), <span class="keyword">this</span>.traceRay(&#123;</span><br><span class="line">            start: pos,</span><br><span class="line">            dir: rd</span><br><span class="line">        &#125;, scene, depth + <span class="number">1</span>));</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.getNaturalColor = <span class="function"><span class="keyword">function</span>(<span class="params">thing, pos, norm, rd, scene</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> addLight = <span class="function"><span class="keyword">function</span>(<span class="params">col, light</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> ldis = Vector.minus(light.pos, pos);</span><br><span class="line">            <span class="keyword">var</span> livec = Vector.norm(ldis);</span><br><span class="line">            <span class="keyword">var</span> neatIsect = _this.testRay(&#123;</span><br><span class="line">                start: pos,</span><br><span class="line">                dir: livec</span><br><span class="line">            &#125;, scene);</span><br><span class="line">            <span class="keyword">var</span> isInShadow = (neatIsect === <span class="literal">undefined</span>) ? <span class="literal">false</span> : (neatIsect &lt;= Vector.mag(ldis));</span><br><span class="line">            <span class="keyword">if</span>(isInShadow) &#123;</span><br><span class="line">                <span class="keyword">return</span> col;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> illum = Vector.dot(livec, norm);</span><br><span class="line">                <span class="keyword">var</span> lcolor = (illum &gt; <span class="number">0</span>) ? Color.scale(illum, light.color) :</span><br><span class="line">                    Color.defaultColor;</span><br><span class="line">                <span class="keyword">var</span> specular = Vector.dot(livec, Vector.norm(rd));</span><br><span class="line">                <span class="keyword">var</span> scolor = (specular &gt; <span class="number">0</span>) ? Color.scale(<span class="built_in">Math</span>.pow(specular, thing.surface.roughness), light.color) :</span><br><span class="line">                    Color.defaultColor;</span><br><span class="line">                <span class="keyword">return</span> Color.plus(col, Color.plus(Color.times(thing.surface.diffuse(pos), lcolor), Color.times(thing.surface.specular(pos), scolor)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> scene.lights.reduce(addLight, Color.defaultColor);</span><br><span class="line">    &#125;;</span><br><span class="line">    RayTracer.prototype.render = <span class="function"><span class="keyword">function</span>(<span class="params">scene, ctx, screenWidth, screenHeight</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> getPoint = <span class="function"><span class="keyword">function</span>(<span class="params">x, y, camera</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> recenterX = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span>(x - (screenWidth / <span class="number">2.0</span>)) / <span class="number">2.0</span> / screenWidth;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">var</span> recenterY = <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> -(y - (screenHeight / <span class="number">2.0</span>)) / <span class="number">2.0</span> / screenHeight;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">return</span> Vector.norm(Vector.plus(camera.forward, Vector.plus(Vector.times(recenterX(x), camera.right), Vector.times(recenterY(y), camera.up))));</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> y = <span class="number">0</span>; y &lt; screenHeight; y++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; screenWidth; x++) &#123;</span><br><span class="line">                <span class="keyword">var</span> color = <span class="keyword">this</span>.traceRay(&#123;</span><br><span class="line">                    start: scene.camera.pos,</span><br><span class="line">                    dir: getPoint(x, y, scene.camera)</span><br><span class="line">                &#125;, scene, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">var</span> c = Color.toDrawingColor(color);</span><br><span class="line">                ctx.fillStyle = <span class="string">"rgb("</span> + <span class="built_in">String</span>(c.r) + <span class="string">", "</span> + <span class="built_in">String</span>(c.g) + <span class="string">", "</span> + <span class="built_in">String</span>(c.b) + <span class="string">")"</span>;</span><br><span class="line">                ctx.fillRect(x, y, x + <span class="number">1</span>, y + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> RayTracer;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultScene</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        things: [<span class="keyword">new</span> Plane(<span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>), <span class="number">0.0</span>, Surfaces.checkerboard),</span><br><span class="line">            <span class="keyword">new</span> Sphere(<span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">-0.25</span>), <span class="number">1.0</span>, Surfaces.shiny),</span><br><span class="line">            <span class="keyword">new</span> Sphere(<span class="keyword">new</span> Vector(<span class="number">-1.0</span>, <span class="number">0.5</span>, <span class="number">1.5</span>), <span class="number">0.5</span>, Surfaces.shiny)</span><br><span class="line">        ],</span><br><span class="line">        lights: [&#123;</span><br><span class="line">            pos: <span class="keyword">new</span> Vector(<span class="number">-2.0</span>, <span class="number">2.5</span>, <span class="number">0.0</span>),</span><br><span class="line">            color: <span class="keyword">new</span> Color(<span class="number">0.49</span>, <span class="number">0.07</span>, <span class="number">0.07</span>)</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            pos: <span class="keyword">new</span> Vector(<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">1.5</span>),</span><br><span class="line">            color: <span class="keyword">new</span> Color(<span class="number">0.07</span>, <span class="number">0.07</span>, <span class="number">0.49</span>)</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            pos: <span class="keyword">new</span> Vector(<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">-1.5</span>),</span><br><span class="line">            color: <span class="keyword">new</span> Color(<span class="number">0.07</span>, <span class="number">0.49</span>, <span class="number">0.071</span>)</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            pos: <span class="keyword">new</span> Vector(<span class="number">0.0</span>, <span class="number">3.5</span>, <span class="number">0.0</span>),</span><br><span class="line">            color: <span class="keyword">new</span> Color(<span class="number">0.21</span>, <span class="number">0.21</span>, <span class="number">0.35</span>)</span><br><span class="line">        &#125;],</span><br><span class="line">        camera: <span class="keyword">new</span> Camera(<span class="keyword">new</span> Vector(<span class="number">3.0</span>, <span class="number">2.0</span>, <span class="number">4.0</span>), <span class="keyword">new</span> Vector(<span class="number">-1.0</span>, <span class="number">0.5</span>, <span class="number">0.0</span>))</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canv = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line">    canv.width = <span class="number">600</span>;</span><br><span class="line">    canv.height = <span class="number">600</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(canv);</span><br><span class="line">    <span class="keyword">var</span> ctx = canv.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="keyword">var</span> rayTracer = <span class="keyword">new</span> RayTracer();</span><br><span class="line">    <span class="keyword">return</span> rayTracer.render(defaultScene(), ctx, canv.width, canv.height);</span><br><span class="line">&#125;</span><br><span class="line">exec();</span><br></pre></td></tr></table></figure>
<p>运行效果：</p>
<p><img src="https://i.imgur.com/WwCPgKh.png" alt=""></p>
<h3 id="五、ECMAScript-1"><a href="#五、ECMAScript-1" class="headerlink" title="五、ECMAScript"></a>五、ECMAScript</h3><blockquote>
<p>它是一种由ECMA国际（前身为欧洲计算机制造商协会）制定和发布的脚本语言规范，javascript在它基础上经行了自己的封装。但通常来说，术语ECMAScript和javascript指的是同一个。业界所说的ECMAScript其实是指一种规范，或者说是一个标准。具体点来说，它其实就是一份文档</p>
</blockquote>
<p>JS包含三个部分：ECMAScript（核心）、DOM（文档对象模型）、BOM（浏览器对象模型），ECMAScript是js语言的基础。</p>
<ol>
<li>ECMAScript3新增了对正则表达式、新控制语句、try-catch异常处理的支持，修改了字符处理、错误定义和数值输出等内容。标志着ECMAScript成为了一门真正的编程语言。</li>
<li>第四版于2008年7月发布前被废弃。</li>
<li>ECMAScript5力求澄清第3版中的歧义，并添加了新的功能。新功能包括：原生JSON对象、继承的方法、高级属性的定义以及引入严格模式。</li>
<li>ECMAScript6是继ES5之后的一次主要改进，增添了许多必要的特性，例如：模块和类以及一些实用特性，Maps、Sets、Promises、生成器（Generators）等。</li>
</ol>
<p><img src="https://i.imgur.com/YIxvpyA.png" alt=""></p>
<p>浏览器支持：</p>
<p>一般来说，除了针对个别特性的特殊说明，各大主流浏览器都支持es5，包括</p>
<blockquote>
<p>Chrome 13+</p>
<p>Firefox 4+</p>
<p>Safari 5.1*</p>
<p>IE 9*</p>
</blockquote>
<p>其中IE9不支持es的严格模式，从IE10开始支持。Safari 5.1不支持 Function.prototype.bind</p>
<p>IE8只支持defineProperty、getOwnPropertyDescriptor的部分特性和JSon的新特性，IE9支持除了严格模式以外的新特性，IE10和其他主流浏览器都支持了。<br>因此在PC端开发的时候，要注意IE9以下的兼容，移动端开发时，可以比较放心了。</p>
<p>版本：</p>
<blockquote>
<p>1995年，网景浏览器发布，包含一种脚本语言叫LiveScript</p>
<p>1996年，网景为搭上热炒Java的顺风车，将LiveScript改名为Javascript, 并提供给ECMA International进行标准化</p>
<p>1997年，ECMAScript1发布</p>
<p>1998年，ECMAScript2发布</p>
<p>1999年，ECMAScript3发布</p>
<p>3.0版是一个巨大的成功，在业界得到广泛支持，成为通行标准，奠定了JavaScript语言的基本语法，以后的版本完全继承。直到今天，初学者一开始学习JavaScript，其实就是在学3.0版的语法。</p>
<p>2007年，ECMAScript4.0版草案发布，本来预计次年8月发布正式版本。但是，各方对于是否通过这个标准，发生了严重分歧。以Yahoo、Microsoft、Google为首的大公司，反对JavaScript的大幅升级，主张小幅改动；以JavaScript创造者Brendan Eich为首的Mozilla公司，则坚持当前的草案。</p>
<p>2008年， 由于对于下一个版本应该包括哪些功能，各方分歧太大，争论过于激烈，ECMA开会决定，中止ECMAScript 4.0的开发，将其中涉及现有功能改善的一小部分，发布为ECMAScript 3.1，而将其他激进的设想扩大范围，放入以后的版本，由于会议的气氛，该版本的项目代号起名为Harmony（和谐）。会后不久，ECMAScript 3.1就改名为ECMAScript 5。</p>
<p>2009年，ECMAScript5发布，Harmony项目则一分为二，一些较为可行的设想定名为JavaScript.next继续开发，后来演变成ECMAScript 6；一些不是很成熟的设想，则被视为JavaScript.next.next，在更远的将来再考虑推出。TC39委员会的总体考虑是，ES5与ES3基本保持兼容，较大的语法修正和新功能加入，将由JavaScript.next完成。当时，JavaScript.next指的是ES6，第六版发布以后，就指ES7。TC39的判断是，ES5会在2013年的年中成为JavaScript开发的主流标准，并在此后五年中一直保持这个位置。</p>
<p>2011年，ECMAScript5.1发布</p>
<p>2015年，ECMAScript6发布，同年决定以后将多年一次的完整的新版本发布改为一年一次的新特性版本的发布，因此ES6又叫ES2015</p>
<p>2017年，ECMAScript8（EcmaScript 2017）在6月底由TC39正式发布</p>
</blockquote>
<h3 id="六、总结-1"><a href="#六、总结-1" class="headerlink" title="六、总结"></a>六、总结</h3><p>coffeescript已经过去了，除非你对它非常熟悉，否则建选择typescript。</p>
<p>因为ECMAScript6的出现，javascript比以前要完善一些，但浏览器的支持度还是不够，但是有一天当JavaScript变得足够完善时这些中间语言就没有太多市场了。</p>
<p>上面提到的4种预处理工具都可以加快开发速度，某些程度上可以提高代码质量。</p>
<p>至于学习的方法我认为官网有详细的帮助。</p>
<p>总的来说要选择：Coffeescript、TypeScript或ES6都有争议。</p>
<blockquote>
<p>参考网站：<a href="http://www.peise.net/tools/web/" target="_blank" rel="noopener">http://www.peise.net/tools/web/</a></p>
</blockquote>
<p><img src="https://i.imgur.com/G4tTvYk.png" alt=""><br><img src="https://i.imgur.com/MGLWLxR.png" alt=""><br><img src="https://i.imgur.com/EJGgjny.png" alt=""></p>
<p>切换样式的参考代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Sass!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"color"</span> <span class="attr">data-color</span>=<span class="string">"css/red.css"</span>&gt;</span>红色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"color"</span> <span class="attr">data-color</span>=<span class="string">"css/blue.css"</span>&gt;</span>蓝色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">id</span>=<span class="string">"css1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            $(<span class="string">".color"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> file=$(<span class="keyword">this</span>).data(<span class="string">"color"</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#css1"</span>).attr(<span class="string">"href"</span>,file);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
                                                            <p>本文链接：
                                                                <a href="https://netlover.cn/2018/09/05/qianduanyuchuli.html">
                                                                    https://netlover.cn/2018/09/05/qianduanyuchuli.html
                                                                </a>
                                                            </p>
                                                            
                                        </div>
                                        <div class="article-info article-info-index">
                                                
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Less/">Less</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sass/">Sass</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/">TypeScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/预处理/">预处理</a></li></ul>
	</div>


                                                    
                                                        
                                                                <div class="clearfix"></div>
                                            </div>
            </div>
            
                <div id="socialShare" style="margin-left:10px;display:none;">
                </div>
                <script>
                    $(function() {
                        var width = document.body.scrollWidth;
                        if (width > 550) {
                            $("#socialShare").css("display", "block");
                            $("#socialShare").socialShare({
                                content: 'Nice!不错的资源...',
                                url: window.location.href,
                                titile: ''
                            });
                        }
                    });
                </script>
                
                    
                        <div class="donateContainer">
                            <span id="donate" class="donate" onclick="donate()">打赏</span>
                            <div id="QR" style="display: none;">
                                <div id="alipay" style="display: inline-block">
                                    <a href="/img/weixin.jpg" target="_blank" class="fancybox fancybox.image" rel="group">
                                        <img id="alipay_qr" src="/img/weixin.jpg">
                                    </a>
                                </div>
                                <div id="wechat" style="display: inline-block">
                                    <a href="/img/zhifubao.jpg" target="_blank" class="fancybox fancybox.image" rel="group">
                                        <img id="wechat_qr" src="/img/zhifubao.jpg">
                                    </a>
                                </div>
                            </div>
                            <script>
                                function donate() {
                                    var qr = document.getElementById('QR');
                                    if (qr.style.display === 'none') {
                                        qr.style.display = 'block';
                                    } else {
                                        qr.style.display = 'none'
                                    }
                                };
                            </script>
                        </div>
                        
                            
                                
<nav id="article-nav">
  
  
    <a href="/2018/08/20/10pattern.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">十种常见的软件架构模式</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


                            
                                        
</article>
</div>
    </div>
    <div class="aside">
      <a href="javascript:;" class="open"></a>
      <a href="javascript:;" class="close"></a>
    </div>
    <div class="hide"><script src="https://s22.cnzz.com/z_stat.php?id=1274486711&web_id=1274486711" language="JavaScript"></script></div>
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css?2018.08.01">
<script src="/fancybox/jquery.fancybox.pack.js?2018.08.01"></script>

<script src="/js/mobile.js?2018.08.01"></script>
<script src="/js/main.js?2018.08.01"></script>
<script src="/js/prefixfree.js?2018.08.01"></script>

<div id="totop">
    <a title="返回顶部">
        <img src="/img/gotop.png" />
    </a>
</div>

<script src="/js/totop.js?2018.08.01"></script>
<script src="/js/share.js?2018.08.01"></script>
  </div>
</body>
</html>
